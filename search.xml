<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>[计算机网络]第五章-传输层</title>
      <link href="/2025/06/22/0218/"/>
      <url>/2025/06/22/0218/</url>
      
        <content type="html"><![CDATA[<h1 id="5-1-传输层提供的服务"><a href="#5-1-传输层提供的服务" class="headerlink" title="5.1 传输层提供的服务"></a>5.1 传输层提供的服务</h1><h2 id="TCP-传输控制协议-Transmission-Control-Protocol"><a href="#TCP-传输控制协议-Transmission-Control-Protocol" class="headerlink" title="TCP: 传输控制协议 (Transmission Control Protocol)"></a>TCP: 传输控制协议 (Transmission Control Protocol)</h2><h2 id="UDP-用户数据报协议-User-Datagram-Protocol"><a href="#UDP-用户数据报协议-User-Datagram-Protocol" class="headerlink" title="UDP: 用户数据报协议 (User Datagram Protocol)"></a>UDP: 用户数据报协议 (User Datagram Protocol)</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>传输层为运行在不同主机上的进程之间提供逻辑通信。</p><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>网络的边缘部分的两台主机使用网络的核心功能进行端到端的通信时只有主机的协议栈才有传输层，而路由器在转发分组时都只用到下三层的功能。(传输层只存在于通信子网以外的主机)</p><h3 id="传输功能"><a href="#传输功能" class="headerlink" title="传输功能"></a>传输功能</h3><ul><li><strong>【应用进程之间的逻辑通信】</strong> 从传输层来看，通信的真正端点不是主机，而是主机中的进程。</li><li><strong>【复用和分用】</strong><ul><li><strong>复用:</strong> 发送方不同的应用进程都可以使用同一个传输层协议传输数据。</li><li><strong>分用:</strong> 接收方的传输层在剥去报文的首部后能够把这些数据正确交付到目的应用进程。</li></ul></li><li><strong>【差错检测】</strong><ul><li>对收到的报文 (首部和数据部分) 进行差错检测。</li><li>对于 TCP 协议，接收方发现报文段出错，则要求发送方重发该报文段。</li><li>对于 UDP 协议，接收方发现数据报出错，则直接丢弃。</li><li>在网络层，IP 数据报首部中的检验和字段只检验首部是否出错，而不检查数据部分。</li></ul></li><li><strong>【提供面向连接和无连接的】</strong><ul><li>传输层向高层屏蔽了低层网络核心的细节，向两个传输层实体之间提供一条端到端逻辑通信信道。</li><li><strong>TCP:</strong> 尽管下面的网络不可靠 (只提供尽最大努力的交付) 但这种逻辑通信信道就相当于一条全双工的可靠信道。</li><li><strong>UDP:</strong> 这种逻辑通信信道仍是一条不可靠信道。</li></ul></li></ul><h2 id="传输层的寻址与端口"><a href="#传输层的寻址与端口" class="headerlink" title="传输层的寻址与端口"></a>传输层的寻址与端口</h2><h3 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h3><p>端口让应用层的各种进程将其数据通过端口向下交付给传输层，以及让传输层知道应当将其报文段中的数据向上通过端口交付给应用层相应的进程。在输出层的作用类似于 IP 在网络层的作用。</p><ul><li><strong>【软件端口】</strong> 协议栈层间抽象的协议端口，是应用层的各种协议进程与传输实体进行层间交互的一种地址，不同于路由器或交换机上的硬件端口。传输层使用的是软件端口。应用进程通过端口号标识。</li><li><strong>【硬件端口】</strong> 不同硬件设备间进行交互的接口。</li></ul><h3 id="服务访问点"><a href="#服务访问点" class="headerlink" title="服务访问点"></a>服务访问点</h3><table><thead><tr><th align="left">层级</th><th align="left">服务访问点名称</th></tr></thead><tbody><tr><td align="left">数据链路层</td><td align="left">帧的类型字段</td></tr><tr><td align="left">网络层</td><td align="left">IP 数据报的协议字段</td></tr><tr><td align="left">传输层</td><td align="left">端口号字段</td></tr><tr><td align="left">应用层</td><td align="left">用户界面</td></tr></tbody></table><h3 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h3><ul><li><strong>长度:</strong> 16bit (2^16&#x3D;65536)</li><li>端口号只具有本地意义 (只标识本地计算机应用层中的进程)</li><li>两类端口号:<ul><li><strong>服务端使用熟知端口号:</strong> 0~1023 IANA 将其指派给 TCP&#x2F;IP 最重要的一些用户程序。</li></ul></li></ul><table><thead><tr><th align="left">应用程序</th><th align="left">FTP</th><th align="left">TELNET</th><th align="left">SMTP</th><th align="left">DNS</th><th align="left">TFTP</th><th align="left">HTTP</th><th align="left">SNMP</th></tr></thead><tbody><tr><td align="left">熟知端口号</td><td align="left">21</td><td align="left">23</td><td align="left">25</td><td align="left">53</td><td align="left">69</td><td align="left">80</td><td align="left">161</td></tr></tbody></table><pre><code>*   **登记端口号:** 1024~49151 供没有熟知端口号的应用程序使用。要使用它们必须在 IANA 登记，以防重复。*   **用户进程使用的端口号:** 49152~65535 仅在客户进程运行时才动态地选择。又称短暂端口号。通信结束后刚用过的客户端口号就不复存在。</code></pre><h2 id="无连接服务与面向连接服务-TCP-IP-协议族在-IP-层之上使用的两种传输协议"><a href="#无连接服务与面向连接服务-TCP-IP-协议族在-IP-层之上使用的两种传输协议" class="headerlink" title="无连接服务与面向连接服务 (TCP&#x2F;IP 协议族在 IP 层之上使用的两种传输协议)"></a>无连接服务与面向连接服务 (TCP&#x2F;IP 协议族在 IP 层之上使用的两种传输协议)</h2><h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><ul><li><strong>【面向连接的传输控制协议】</strong> 面向连接，可靠。</li><li>采用 TCP 时，传输层向上提供一条全双工的可靠逻辑信道。</li><li>主要适用于可靠性更重要的场合。通信双方在传送数据之前必须先建立连接，然后基于此连接进行可靠数据传输。数据传输结束后要释放连接。</li><li>TCP 不提供广播或多播服务。</li><li>为了实现可靠传输，增加了 <strong>【确认】</strong> <strong>【流量控制】</strong> <strong>【计时器】</strong> 及 <strong>【连接管理】</strong> 等。</li><li><strong>适用场合:</strong> <strong>【文件传输协议 FTP】</strong> <strong>【超文本传输协议 HTTP】</strong> <strong>【远程登陆 TELNET】</strong>。</li></ul><h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><ul><li><strong>【无连接的用户数据报协议】</strong> 无连接，不可靠。</li><li>采用 UDP 时，传输层向上提供的是一条不可靠的逻辑信道。双方传送数据之前不需要建立连接，接收方的传输层在收到 UDP 用户数据报后无须给发送方发回任何确认。</li><li>UDP 在 IP 层之上仅提供两个附加服务: 多路复用和对数据包的错误检查。IP 层知道怎样将分组投递给一台主机，但不知道怎样把它们投递到主机上的具体应用。(TCP&#x2F;IP 协议中的 IP 层对应 OSI 模型中的网络层。)</li><li><strong>适用场合:</strong> <strong>【小文件传送协议 TFTP】</strong> <strong>【DNS】</strong> <strong>【SNMP】</strong> 和 <strong>【实时传输协议 RTP】</strong>。</li></ul><h2 id="典型互联网应用协议"><a href="#典型互联网应用协议" class="headerlink" title="典型互联网应用协议"></a>典型互联网应用协议</h2><p><strong>表5.1 一些典型互联网应用所用的 TCP&#x2F;IP 应用层协议和传输层协议</strong></p><table><thead><tr><th align="left">互联网应用</th><th align="left">TCP&#x2F;IP 应用层协议</th><th align="left">TCP&#x2F;IP 传输层协议</th></tr></thead><tbody><tr><td align="left">域名解析</td><td align="left">域名系统 (DNS)</td><td align="left">UDP</td></tr><tr><td align="left">文件传送</td><td align="left">简单文件传送协议 (TFTP)</td><td align="left">UDP</td></tr><tr><td align="left">路由选择</td><td align="left">路由信息协议 (RIP)</td><td align="left">UDP</td></tr><tr><td align="left">网络参数配置</td><td align="left">动态主机配置协议 (DHCP)</td><td align="left">UDP</td></tr><tr><td align="left">网络管理</td><td align="left">简单网络管理协议 (SNMP)</td><td align="left">UDP</td></tr><tr><td align="left">IP 多播</td><td align="left">网际组管理协议 (IGMP)</td><td align="left">UDP</td></tr><tr><td align="left">电子邮件</td><td align="left">简单邮件传送协议 (SMTP)</td><td align="left">TCP</td></tr><tr><td align="left">远程终端接入</td><td align="left">电传机网络 (TELNET)</td><td align="left">TCP</td></tr><tr><td align="left">万维网</td><td align="left">超文本传送协议 (HTTP)</td><td align="left">TCP</td></tr><tr><td align="left">文件传送</td><td align="left">文件传送协议 (FTP)</td><td align="left">TCP</td></tr></tbody></table><h3 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h3><ul><li><strong>IP 数据报和 UDP 数据报:</strong> IP 数据报在网络层要经过路由器的存储转发; UDP 数据包在传输层端到端逻辑信道中传输，封装成 IP 数据报在网络层传输时，UDP 数据报的信息对路由器不可见。</li><li><strong>TCP 和网络层虚电路:</strong> TCP 报文段在传输层抽象的逻辑信道中传输，对路由器不可见。虚电路所经过的交换结点都必须保存虚电路状态信息。在网络层如果采用虚电路方式，则无法提供无连接服务。传输层采用 TCP 不影响网络层提供无连接服务。</li></ul><h2 id="UDP-与-TCP"><a href="#UDP-与-TCP" class="headerlink" title="UDP 与 TCP"></a>UDP 与 TCP</h2><h3 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h3><p>(此处原文有一张图片，展示 TCP&#x2F;IP 体系结构，包括应用层、运输层、网际层、网络接口层及其对应的协议栈，以及 UDP 和 TCP 对应用层报文的处理示意图。)</p><h3 id="可靠性对比"><a href="#可靠性对比" class="headerlink" title="可靠性对比"></a>可靠性对比</h3><p><strong>发送方</strong></p><table><thead><tr><th align="left">层级</th><th align="left">UDP</th><th align="left">TCP</th></tr></thead><tbody><tr><td align="left">应用层</td><td align="left"></td><td align="left"></td></tr><tr><td align="left">运输层</td><td align="left">无连接不可靠传输服务</td><td align="left">面向连接可靠传输服务</td></tr><tr><td align="left">网际层</td><td align="left">无连接不可靠传输服务</td><td align="left">无连接不可靠传输服务</td></tr><tr><td align="left">网络接口层</td><td align="left"></td><td align="left"></td></tr></tbody></table><p><strong>接收方</strong></p><table><thead><tr><th align="left">层级</th><th align="left">UDP</th><th align="left">TCP</th></tr></thead><tbody><tr><td align="left">应用层</td><td align="left"></td><td align="left"></td></tr><tr><td align="left">运输层</td><td align="left">无连接不可靠传输服务</td><td align="left">面向连接可靠传输服务</td></tr><tr><td align="left">网际层</td><td align="left">无连接不可靠传输服务</td><td align="left">无连接不可靠传输服务</td></tr><tr><td align="left">网络接口层</td><td align="left"></td><td align="left"></td></tr></tbody></table><ul><li>UDP 向上层提供无连接不可靠传输服务 (适用于 IP 电话、视频会议等实时应用)</li><li>TCP 向上层提供面向连接的可靠传输服务 (适用于要求可靠传输的应用，例如文件传输)</li></ul><h3 id="首部"><a href="#首部" class="headerlink" title="首部"></a>首部</h3><p>(此处原文有一张图片，展示 UDP 用户数据报和 TCP 报文段的首部格式。)</p><p><strong>UDP 用户数据报首部</strong></p><table><thead><tr><th align="left">字段名称</th><th align="left">字节数</th><th align="left">比特数</th></tr></thead><tbody><tr><td align="left">源端口</td><td align="left">2</td><td align="left"></td></tr><tr><td align="left">目的端口</td><td align="left">2</td><td align="left"></td></tr><tr><td align="left">长度</td><td align="left">2</td><td align="left"></td></tr><tr><td align="left">检验和</td><td align="left">2</td><td align="left"></td></tr></tbody></table><ul><li>UDP 用户数据报首部仅 8 字节。</li></ul><p><strong>TCP 报文段首部</strong></p><table><thead><tr><th align="left">字段名称</th><th align="left">比特数</th></tr></thead><tbody><tr><td align="left">源端口</td><td align="left">16</td></tr><tr><td align="left">目的端口</td><td align="left">16</td></tr><tr><td align="left">序号</td><td align="left">32</td></tr><tr><td align="left">确认号</td><td align="left">32</td></tr><tr><td align="left">数据偏移</td><td align="left">4</td></tr><tr><td align="left">保留</td><td align="left">6</td></tr><tr><td align="left">标志位</td><td align="left">6</td></tr><tr><td align="left">窗口</td><td align="left">16</td></tr><tr><td align="left">检验和</td><td align="left">16</td></tr><tr><td align="left">紧急指针</td><td align="left">16</td></tr><tr><td align="left">选项</td><td align="left">可变</td></tr><tr><td align="left">填充</td><td align="left">可变</td></tr></tbody></table><ul><li>TCP 报文段首部最小 20 字节，最大 60 字节。</li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><table><thead><tr><th align="left">特性</th><th align="left">UDP (User Datagram Protocol)</th><th align="left">TCP (Transmission Control Protocol)</th></tr></thead><tbody><tr><td align="left">连接</td><td align="left">无连接</td><td align="left">面向连接</td></tr><tr><td align="left">端点通信</td><td align="left">支持“一对一”、“一对多”、“多对一”和“多对多”交互通信</td><td align="left">每一条 TCP 连接只能有两个端点 EP，只能是一对一通信</td></tr><tr><td align="left">数据流类型</td><td align="left">面向应用报文</td><td align="left">面向字节流</td></tr><tr><td align="left">可靠性</td><td align="left">尽最大努力交付，即不可靠；不使用流量控制和拥塞控制</td><td align="left">可靠传输，使用流量控制和拥塞控制</td></tr><tr><td align="left">首部开销</td><td align="left">首部开销小，仅 8 字节</td><td align="left">首部开销最小 20 字节，最大 60 字节</td></tr></tbody></table><h2 id="习题查漏补缺"><a href="#习题查漏补缺" class="headerlink" title="习题查漏补缺"></a>习题查漏补缺</h2><ol><li><strong>通信子网、传输层、资源子网</strong><ul><li><strong>通信子网:</strong> 包括物理层、数据链路层和网络层，主要负责数据通信。</li><li><strong>传输层:</strong> 主要任务是向高层用户屏蔽下面通信子网的细节 (如网络拓扑、路由协议等)。</li><li><strong>资源子网:</strong> OSI 参考模型的上三层。</li></ul></li><li>传输层面向连接服务的特性: 保证可靠和顺序交付。</li><li>一个 TCP 报文的首部长度是 20B, 一个 IP 数据报的首部长度也是 20B, 再加上 60B 的数据, 一个 IP 数据报的总长度为 100B, 从而数据占 60%。</li><li>若用户应用程序使用 UDP 进行数据传输, 则必须在传输层的上层即应用层提供可靠性方面的全部工作。</li></ol><h2 id="5-2-UDP-协议"><a href="#5-2-UDP-协议" class="headerlink" title="5.2 UDP 协议"></a>5.2 UDP 协议</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>UDP 仅在 IP 层的数据包服务之上增加了两个最基本的功能，复用和分用，以及差错检测。</p><h3 id="UDP-特点"><a href="#UDP-特点" class="headerlink" title="UDP 特点"></a>UDP 特点</h3><ul><li><strong>无需建立连接:</strong> UDP 不会引入建立连接的时延。DNS 运行在 UDP 上，HTTP 运行在 TCP 上。</li><li><strong>无连接状态:</strong><ul><li>TCP 需要在端系统中维护连接状态，此连接状态包括接收和发送缓存、拥塞控制参数和序号与确认号的参数。</li><li>UDP 既不维护连接状态，也不跟踪这些参数。</li></ul></li><li><strong>UDP 首部开销小:</strong> TCP 首部开销 20B，UDP 首部开销 8B。</li><li><strong>UDP 没有拥塞控制:</strong> 因此网络中的拥塞不会影响源主机的发送速率。</li><li><strong>交互通信:</strong> 支持一对一、一对多、多对一和多对多的交互通信。</li><li><strong>面向报文:</strong><ul><li>发送方 UDP 对应用层交下来的报文，在添加首部后就向下交付给 IP 层，一次发送一个报文，既不合并也不拆分，而是保留这些报文的边界。</li><li>报文不可分割，是 UDP 数据包处理的最小单位。所以应用程序必须选择合适大小的报文。</li></ul></li></ul><h3 id="首部格式"><a href="#首部格式" class="headerlink" title="首部格式"></a>首部格式</h3><p>(此处原文有一张图片，展示 UDP 数据报格式，包括源端口号、目的端口号、长度、检验和等字段。)<br>UDP 首部一共 8B，有四个字段组成，每个字段的长度都是 2B。</p><ul><li><strong>源端口:</strong> 在需要对方回信时选用。不需要时全 0。</li><li><strong>目的端口:</strong> 必须用到。<ul><li>如果接收方 UDP 发现收到的报文中目的端口号不正确 (不存在对应于端口号的应用进程)，就丢弃该报文，并由 ICMP 发送 “端口不可达” 差错报文给发送方。</li></ul></li><li><strong>长度:</strong> UDP 数据报的长度 (包括首部和数据)，最小值为 8 (仅有首部的情况)。</li><li><strong>检验和:</strong> 检验 UDP 数据报在传输中是否出错，有错就丢弃。可选。如果源主机不想计算检验和，就直接令该字段全 0。</li></ul><h3 id="UDP-检验"><a href="#UDP-检验" class="headerlink" title="UDP 检验"></a>UDP 检验</h3><p>在计算检验和时需要在 UDP 数据报之前增加 12B 的伪首部，得到一个临时的 UDP 数据报。<br>(此处原文有一张图片，展示 UDP 检验和计算时的伪首部结构，以及伪首部、UDP 首部和数据部分的组合示意图。)</p><ul><li>IP 数据报的检验和只检验 IP 数据报的首部，但 UDP 的检验和要将首部和数据部分一起检验。</li></ul><h2 id="5-3-TCP-协议"><a href="#5-3-TCP-协议" class="headerlink" title="5.3 TCP 协议"></a>5.3 TCP 协议</h2><h3 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h3><p>TCP 是在不可靠的 IP 层之上实现的可靠的数据传输协议，主要解决传输的可靠、有序、无丢失和不重复问题。</p><h3 id="主要特点"><a href="#主要特点" class="headerlink" title="主要特点"></a>主要特点</h3><ul><li><strong>面向连接:</strong> TCP 连接是一条逻辑连接。</li><li><strong>只能一对一:</strong> 每一条 TCP 连接只能有两个端点; 每条 TCP 连接只能是一对一的。</li><li><strong>可靠交付:</strong> 保证传送的数据无差错、不丢失、无重复且有序。</li><li><strong>全双工:</strong> 提供全双工通信，允许通信双方的应用进程在任何时候都能发送数据，为此，TCP 连接的两段都设有发送缓存和接收缓存。<ul><li><strong>发送缓存:</strong> 存放发送应用程序传送给发送方 TCP 准备发送的数据; 存放 TCP 已发送但尚未收到确认的数据。</li><li><strong>接收缓存:</strong> 存放按序到达但尚未被接收应用程序读取的数据; 不按序到达的数据。</li></ul></li><li><strong>面向字节流:</strong> 应用程序和 TCP 的交互是一次一个数据块 (大小不等)，但 TCP 把应用程序交下来的数据仅视为一连串的无结构字节流。<ul><li>UDP 报文的长度由发送应用进程决定。TCP 报文的长度根据接收方给出的窗口值和当前网络拥塞程度来决定。</li></ul></li></ul><h3 id="TCP-报文段-TCP-传送的数据单元。既可以运载数据，又可以建立连接、释放连接和应答"><a href="#TCP-报文段-TCP-传送的数据单元。既可以运载数据，又可以建立连接、释放连接和应答" class="headerlink" title="TCP 报文段 (TCP 传送的数据单元。既可以运载数据，又可以建立连接、释放连接和应答)"></a>TCP 报文段 (TCP 传送的数据单元。既可以运载数据，又可以建立连接、释放连接和应答)</h3><h3 id="首部格式-1"><a href="#首部格式-1" class="headerlink" title="首部格式"></a>首部格式</h3><p>(此处原文有一张图片，展示 TCP 报文段的首部格式，包括固定首部和扩展首部中的各个字段。)</p><ul><li><strong>序号:</strong> 占 32bit, 取值范围为 0~(2^32)-1。用来指出本 TCP 报文段数据载荷的第一个字节的序号。当序号增加到最后一个时下一个序号又回到 0。</li><li><strong>确认号:</strong> 占 32bit, 取值范围为 0~(2^32)-1。用来指出期望收到对方下一个 TCP 报文段的数据载荷的第一个字节的序号。同时也是对之前收到的所有数据的确认。当确认号增加到最后一个时下一个确认号又回到 0。</li><li><strong>确认标志位 ACK:</strong> 只有当 ACK 取值为 1 时，确认号字段才有效，否则无效。TCP 规定在 TCP 连接建立后，所有传送的 TCP 报文段都必须把 ACK 置 1。</li><li><strong>数据偏移:</strong> 占 4bit, 该字段的取值以 4 字节为单位，指出 TCP 报文段的数据载荷部分的起始处距离 TCP 报文段的起始处有多远。这实际上指出 TCP 报文段的首部长度。<ul><li>在 TCP 协议中，数据偏移 (Data Offset) 字段是 TCP 头部的一个组成部分，用于指示 TCP 头部的长度。这个字段占用 4 位 (bit)，因此它可以取值的范围是 0 到 15 (因为 2^4&#x3D;16)，这表示 TCP 头部长度可以从 0 到 60 字节 (因为每个值代表 4 字节，所以 15 乘以 4 等于 60)。</li><li>(此处原文有一张图片，展示数据偏移字段在 TCP 报文段中的位置示意图。)</li></ul></li><li><strong>保留字段:</strong> 占 6bit, 目前应置为 0。</li><li><strong>窗口字段:</strong><ul><li>占 16 比特，该字段的取值以字节为单位。</li><li>指出发送本报文段的一方的接收窗口的大小，即接收缓存的可用空间大小，这用来表征接收方的接收能力。</li><li>在计算机网络中，经常用接收方的接收能力的大小来控制发送方的数据发送量，这就是所谓的流量控制。</li></ul></li><li><strong>检验和字段:</strong> 占 16bit, 用来检查整个 TCP 报文段在传输过程中是否出现了误码。</li><li><strong>同步标志位 SYN:</strong> 用于 TCP “三报文握手” 建立连接。当 SYN&#x3D;1 且 ACK&#x3D;0 时表明这是一个 TCP 连接请求报文段。对方若同意建立连接则应在响应的 TCP 报文段的首部中使 SYN&#x3D;1 且 ACK&#x3D;1。所以 SYN 为 1 的 TCP 报文段要么是一个连接请求报文段，要么是一个连接响应报文段。</li><li><strong>终止标志位 FIN:</strong> 用于 TCP “四报文挥手” 释放连接。FIN&#x3D;1 时表明此 TCP 报文段的发送方已经将全部数据发送完毕，现在要求释放 TCP 连接。</li><li><strong>复位标志位 RST:</strong> 用于复位 TCP 连接。当 RST&#x3D;1 时表明 TCP 连接中出现严重差错，必须释放连接，然后再重新建立连接。RST 置 1 还用来拒绝一个非法的 TCP 报文段或拒绝打开一个 TCP 连接。</li><li><strong>推送标志位 PSH:</strong><ul><li>出于效率的考虑，TCP 的发送方可能会延迟发送数据，而 TCP 的接收方可能会延迟向应用进程交付数据。这样可以一次处理更多的数据。</li><li>但是当两个应用进程进行交互式通信时，有时在一端的应用进程希望在键入一个命令后立即就能够收到对方的响应，在这种情况下，应用进程可以通知 TCP 使用推送 (PUSH) 操作。</li><li>发送方 TCP 把 PSH 置 1，并立即创建一个 TCP 报文段发送出去，而不需要积累到足够多的数据再发送。</li><li>接收方 TCP 收到 PSH 为 1 的 TCP 报文段，就尽快地交付给应用进程，而不再等到接收到足够多的数据才向上交付。</li></ul></li><li><strong>紧急标志位 URG:</strong> 1 表示紧急指针字段有效。0 表示无效。</li><li><strong>紧急指针:</strong><ul><li>占 16 比特，以字节为单位，用来指明紧急数据的长度。</li><li>当发送方有紧急数据时，可将紧急数据 “插队” 到发送缓存的最前面，并立刻封装到一个 TCP 报文段中进行发送，紧急指针会指出本报文段数据载荷部分包含了多长的紧急数据，紧急数据之后是普通数据。</li><li>接收方收到紧急标志位为 1 的 TCP 报文段，会按照紧急指针字段的值从报文段数据载荷中取出紧急数据并直接上交应用进程，而不必在接收缓存中排队。</li></ul></li></ul><h3 id="计算检验和"><a href="#计算检验和" class="headerlink" title="计算检验和"></a>计算检验和</h3><p>(此处原文有一张图片，展示了 TCP 报文段首部格式，以及发送方和接收方计算检验和的方法，并与 UDP 检验和进行比较。)</p><ul><li><strong>发送方检验和计算方法:</strong><ol><li>将 TCP 首部中检验和字段的值置为 0。</li><li>将伪首部、TCP 首部以及数据载荷这三部分划分成若干个 2 字节的字。若伪首部、TCP 首部以及数据载荷这三部分的总长度不是偶数个字节，则在最后添加 1 个 “全 0” 字节。</li><li>对划分出的全部 2 字节的字进行反码算数运算求和，并将求和结果取反码。</li><li>将步骤 3 得到的结果写入 TCP 首部中的检验和字段。</li></ol><ul><li>与 IPv4 数据报首部检验和的计算方法 (4.2.7 节) 类似，差别仅在于前者只对首部进行检验。</li></ul></li><li><strong>接收方通过检验和字段的值判断 TCP 报文段在传输过程中是否误码的方法:</strong><ol><li>给接收到的 TCP 报文段前面添加一个 12 字节的伪首部。</li><li>将伪首部、TCP 首部以及数据载荷这三部分划分成若干个 2 字节的字。</li><li>对划分出的全部 2 字节的字进行反码算数运算求和，并将求和结果取反码。</li><li>若步骤 3 得到的结果为 0，则表示 TCP 报文段在传输过程中没有误码。否则，表示出现了误码。</li></ol></li><li><strong>与 UDP 进行比较:</strong><ul><li>(此处原文有一张图片，展示 UDP 和 TCP 检验和的异同点。)</li></ul></li></ul><h3 id="TCP-运输连接"><a href="#TCP-运输连接" class="headerlink" title="TCP 运输连接"></a>TCP 运输连接</h3><p>分为三个阶段:</p><ol><li>通过 “三报文握手” 来建立 TCP 连接。</li><li>基于已建立的 TCP 连接进行可靠的数据传输。</li><li>在数据传输结束后还要通过 “四报文挥手” 来释放 TCP 连接。</li></ol><h4 id="“三报文握手”-建立-TCP-连接"><a href="#“三报文握手”-建立-TCP-连接" class="headerlink" title="“三报文握手” 建立 TCP 连接"></a>“三报文握手” 建立 TCP 连接</h4><p><strong>目的:</strong> 在于解决以下三个主要问题:</p><ul><li>使 TCP 双方能够确知对方的存在。</li><li>使 TCP 双方能够协商一些参数 (最大报文段长度、最大窗口大小、时间戳选项等)。</li><li>使 TCP 双方能够对运输实体资源进行分配和初始化，运输实体资源包括缓存大小、各状态变量、连接表中的项目等。</li></ul><ol><li>每条 TCP 连接有两个端点，此端点即套接字。每条 TCP 连接唯一地被通信的两个端点 (套接字) 确定。</li><li>同一个 IP 地址可以有多个不同的 TCP 连接，而同一个端口号也可以出现在多个不同的 TCP 连接中。</li><li>TCP 连接的建立采用客户&#x2F;服务器模式，主动发起连接建立的应用进程称为客户，而被动等待连接建立的应用进程称为服务器。</li></ol><p><strong>过程:</strong><br>(此处原文有三张图片，逐步展示了 TCP 建立连接的 “三报文握手” 过程，包括 SYN 包、SYN-ACK 包、ACK 包的发送和状态转换。)</p><ul><li><strong>序号 seq 字段被设置了一个初始值 x，作为 TCP 客户进程所选择的初始序号。</strong></li><li><strong>请同学们注意:</strong><ul><li>TCP 规定同步标志位 SYN 被设置为 1 的报文段 (例如 TCP 连接请求报文段和 TCP 连接请求确认报文段) 不能携带数据，但要消耗掉一个序号。</li><li>按上述规定，TCP 连接请求报文段不能携带数据 (即没有数据载荷)，但是会消耗掉序号 x。</li><li>因此，TCP 客户进程下一次发送的 TCP 报文段的数据载荷的第一个字节的序号为 x+1。</li></ul></li><li><strong>补充:</strong> 上述过程发送的第三个普通的 TCP 报文段是否多余?(使用三报文握手而不是两报文握手建立 TCP 连接的原因)<ul><li><strong>“三报文握手”建立 TCP 连接 ————使用“三报文握手”而不是“两报文握手”建立 TCP 连接的原因</strong><br>(此处原文有一张图片，展示了使用两报文握手可能导致已失效的连接请求报文段被接受，从而造成资源浪费的场景。)</li><li>采用 “三报文握手” 而不是 “两报文握手” 来建立 TCP 连接，是为了防止已失效的 TCP 连接请求报文段突然又传送到了 TCP 服务器进程，因而导致错误。</li></ul></li></ul><h4 id="“四报文挥手”-释放-TCP-连接"><a href="#“四报文挥手”-释放-TCP-连接" class="headerlink" title="“四报文挥手” 释放 TCP 连接"></a>“四报文挥手” 释放 TCP 连接</h4><p><strong>第一步:</strong> 客户机发送连接释放报文段，并停止发送数据，主动关闭 TCP 连接。该报文段终止位 FIN 设置为 1，序号 seq&#x3D;u (等于前面已传送过的数据的最后一个字节的序号加 1)。<br>(此处原文有一张图片，展示了 TCP 释放连接的第一步，客户机发送 FIN 包，进入 FIN-WAIT-1 状态。)</p><ul><li>TCP 连接释放报文段首部中的终止标志位 FIN 和确认标志位 ACK 的值都被设置为 1。</li><li>表明这是一个 TCP 连接释放报文段，同时也对之前收到的 TCP 报文段进行确认。</li></ul><p><strong>第二步:</strong> 服务器收到连接释放报文段后发出确认。<br>(此处原文有一张图片，展示了 TCP 释放连接的第二步，服务器收到 FIN 包后发送 ACK 包，进入 CLOSE-WAIT 状态。)</p><ul><li>TCP 规定终止标志位 FIN 等于 1 的 TCP 报文段即使不携带数据，也要消耗掉一个序号。</li><li>从 TCP 客户进程到 TCP 服务器进程这个方向的连接就释放了。</li><li><strong>此时的 TCP 连接属于半关闭状态。</strong><ul><li>TCP 客户进程已经没有数据要发送了。但 TCP 服务器进程如果还有数据要发送，TCP 客户进程仍要接收，也就是从 TCP 服务器进程到 TCP 客户进程这个方向的连接并未关闭。</li><li>半关闭状态可能会持续一段时间。</li></ul></li></ul><p><strong>第三步:</strong> 若服务器已经没有要向客户机发送的数据，就通知 TCP 释放连接。<br>(此处原文有一张图片，展示了 TCP 释放连接的第三步，服务器发送 FIN 包，进入 LAST-ACK 状态。)</p><ul><li>TCP 连接释放报文段首部中的终止标志位 FIN 和确认标志位 ACK 的值都被设置为 1。</li><li>表明这是一个 TCP 连接释放报文段，同时也对之前收到的 TCP 报文段进行确认。</li></ul><p><strong>第四步:</strong><br>(此处原文有一张图片，展示了 TCP 释放连接的第四步，客户机发送 ACK 包，进入 TIME-WAIT 状态，服务器进入 CLOSED 状态。)</p><ul><li><strong>TIME-WAIT (时间等待) 状态</strong><ul><li>MSL 是最长报文段寿命 (Maximum Segment Lifetime) 的英文缩写词，[RFC793] 建议为 2 分钟。也就是说，TCP 客户进程进入时间等待 (TIME-WAIT) 状态后，还要经过 4 分钟才能进入关闭 (CLOSED) 状态。</li></ul></li><li><strong>补充:</strong> 为何要经过 2MSL 后才进入关闭状态?<ul><li>处于时间等待 (TIME-WAIT) 状态后要经过 2MSL 时长，可以确保 TCP 服务器进程能够收到最后一个 TCP 确认报文段而进入关闭 (CLOSED) 状态。</li><li>另外，TCP 客户进程在发送完最后一个 TCP 确认报文段后，再经过 2MSL 时长，就可以使本次连接持续期内所产生的所有报文段都从网络中消失。这样就可以使下一个新的 TCP 连接中不会出现旧连接中的报文段。</li></ul></li></ul><p><strong>总结:</strong></p><table><thead><tr><th align="left">阶段</th><th align="left">建立连接</th><th align="left">释放连接</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">SYN&#x3D;1 seq&#x3D;x</td><td align="left">FIN&#x3D;1 seq&#x3D;u</td></tr><tr><td align="left">2</td><td align="left">SYN&#x3D;1 ACK&#x3D;1 seq&#x3D;y ack&#x3D;x+1</td><td align="left">ACK&#x3D;1 seq&#x3D;v ack&#x3D;u+1</td></tr><tr><td align="left">3</td><td align="left">ACK&#x3D;1 seq&#x3D;x+1 ack&#x3D;y+1</td><td align="left">FIN&#x3D;1 ACK&#x3D;1 seq&#x3D;w ack&#x3D;u+1</td></tr><tr><td align="left">4</td><td align="left"></td><td align="left">ACK&#x3D;1 seq&#x3D;u+1 ack&#x3D;w+1</td></tr></tbody></table><h3 id="TCP-可靠传输"><a href="#TCP-可靠传输" class="headerlink" title="TCP 可靠传输"></a>TCP 可靠传输</h3><h4 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h4><p>TCP 在不可靠的 IP 层之上建立一种可靠数据传输服务，该服务保证接收方从缓存区读出的字节流与发送方发出的字节流完全一样。TCP 使用了检验、序号、确认和重传等机制来达到这一目的。</p><h4 id="序号"><a href="#序号" class="headerlink" title="序号"></a>序号</h4><p>TCP 将数据视为一个无结构但有序的字节流，序号建立在传送的字节流之上，而不建立在报文段之上。下图中第二个报文段的序号是 3。<br>(此处原文有一张图片，展示了 TCP 报文段中字节流的序号划分。)</p><h4 id="确认"><a href="#确认" class="headerlink" title="确认"></a>确认</h4><p>确认号是期望收到对方的下一个报文段的数据的第一个字节的序号。<br>TCP 默认使用 <strong>【累积确认】</strong>, 即 TCP 只确认数据流中至第一个丢失字节为止的字节。</p><h4 id="重传"><a href="#重传" class="headerlink" title="重传"></a>重传</h4><p>超时和冗余 ACK 会导致 TCP 对报文段进行重传。</p><h5 id="超时"><a href="#超时" class="headerlink" title="超时"></a>超时</h5><p>TCP 每发送一个报文段就对这个报文段设置一个超时计时器。计时器设置的重传时间到但还未收到确认时，就要重传这一报文段。<br>TCP 采用一种自适应算法来计算超时计时器的重传时间。一个报文段发出的时间以及收到相应确认的时间的间隔称为报文段的往返时间 RTT。TCP 维护 RTT 的一个加权平均往返时间 RTTS，<strong>【超时重传时间】</strong> 应该略大于 RTTS。</p><h5 id="冗余-ACK-冗余确认"><a href="#冗余-ACK-冗余确认" class="headerlink" title="冗余 ACK (冗余确认)"></a>冗余 ACK (冗余确认)</h5><p>冗余 ACK 就是再次确认某个报文段的 ACK。<br>TCP 规定每当比期望序号大的失序报文段到达时，就发送一个冗余 ACK，指明下一个期待字节的序号。<br>例如 3,4,5 号报文段到达时不是自己所期望的 2 号报文段，那就发送 3 个对 1 号报文段的 ACK。</p><h3 id="TCP-流量控制"><a href="#TCP-流量控制" class="headerlink" title="TCP 流量控制"></a>TCP 流量控制</h3><h4 id="概述-4"><a href="#概述-4" class="headerlink" title="概述"></a>概述</h4><p>TCP 为应用程序提供了流量控制机制，以解决因发送方发送数据太快而导致接收方来不及接收，造成接收方的接收缓存溢出的问题。</p><h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><ul><li><strong>基本方法:</strong> 接收方根据自己的接收能力 (接收缓存的可用空间大小) 控制发送方的发送速率。</li><li><strong>采用滑动窗口机制。</strong> TCP 要求发送方维持一个接收窗口 rwnd，接收方根据当前接受缓存的大小动态地调整接收窗口的大小，这个值被放在接收方 TCP 报文段首部中的窗口字段，以通知发送方。发送方的发送窗口不能超过接收方给出的接收窗口值，以限制发送方向网络注入报文的速率。</li><li><strong>TCP 为每个连接设有一个【持续计时器】</strong>，只要发送方收到对方的零窗口通知就启动持续计时器。如果计时器超时，就发送一个零窗口探测报文段，对方就在确认这个探测报文段时给出现在的窗口值。如果窗口仍然为 0，则发送方收到确认报文段后就重新设置持续计时器。<br>(此处原文有一张图片，展示了 TCP 流量控制方法，包括零窗口探测报文段的发送和确认过程。)<ul><li>实际上 TCP 规定: 即使接收窗口值为 0，也必须接受零窗口探测报文段、确认报文段以及携带有紧急数据的报文段。</li><li>回答是肯定的。因为零窗口探测报文段也有重传计时器，当重传计时器超时后，零窗口探测报文段会被重传。</li></ul></li></ul><h4 id="流量控制与数据链路层流量控制比较"><a href="#流量控制与数据链路层流量控制比较" class="headerlink" title="流量控制与数据链路层流量控制比较"></a>流量控制与数据链路层流量控制比较</h4><table><thead><tr><th align="left">特性</th><th align="left">传输层</th><th align="left">数据链路层</th></tr></thead><tbody><tr><td align="left">控制范围</td><td align="left">端到端 (两个进程之间流量控制)</td><td align="left">两个中间的相邻结点之间的流量控制</td></tr><tr><td align="left">窗口大小</td><td align="left">窗口大小可动态变化</td><td align="left">窗口大小不能动态变化</td></tr></tbody></table><h3 id="TCP-拥塞控制"><a href="#TCP-拥塞控制" class="headerlink" title="TCP 拥塞控制"></a>TCP 拥塞控制</h3><h4 id="拥塞控制和流量控制"><a href="#拥塞控制和流量控制" class="headerlink" title="拥塞控制和流量控制"></a>拥塞控制和流量控制</h4><ul><li><strong>拥塞控制:</strong> 指防止过多的数据注入网络，保证网络中的路由器或链路不致过载。</li><li><strong>拥塞出现时，端点并不了解拥塞发生的细节，但是对于通信的端点来说，拥塞往往表现为通信时延的增加。</strong></li><li><strong>TCP 的四种拥塞算法:</strong> 慢开始、拥塞避免、快重传和快恢复。</li></ul><h4 id="闭环拥塞控制算法分类"><a href="#闭环拥塞控制算法分类" class="headerlink" title="闭环拥塞控制算法分类"></a>闭环拥塞控制算法分类</h4><p>根据拥塞信息的反馈形式，可将闭环拥塞控制算法分为：</p><ul><li><strong>显式反馈算法:</strong> 从拥塞节点 (即路由器) 向源点提供关于网络中拥塞状态的显式反馈信息。</li><li><strong>隐式反馈算法:</strong> 源点自身通过对网络行为的观察 (例如超时重传或往返时间 RTT) 来推断网络是否发生拥塞。TCP 采用的就是隐式反馈算法。<br>(此处原文有一张图片，展示隐式反馈和显式反馈算法的区别。)<ul><li>拥塞控制并不仅仅是运输层要考虑的问题。显式反馈算法就必须涉及网络层。虽然一些网络体系结构 (如 ATM 网络) 主要在网络层实现拥塞控制，但因特网主要利用隐式反馈在运输层实现拥塞控制。</li></ul></li></ul><h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><ul><li><strong>流量控制:</strong> 通常指点对点的通信量控制，要做的是抑制发送端发送数据的速率，以便接收端来得及接收。</li><li><strong>拥塞控制:</strong> 让网络能够承受现有的网络负荷，是一个全局性的过程，涉及所有的主机、所有的路由器，以及与降低网络传输性能有关的所有因素。</li></ul><h4 id="拥塞窗口-cwnd"><a href="#拥塞窗口-cwnd" class="headerlink" title="拥塞窗口 (cwnd)"></a>拥塞窗口 (cwnd)</h4><p>TCP 除了上文的接收窗口，还要求发送方维持一个拥塞窗口，其大小取决于网络的拥塞程度，动态变化。<br>发送方控制拥塞窗口的原则: 只要网络出现拥塞，拥塞窗口就减小一些。<br>发送窗口的上限值取接收窗口 rwnd 和拥塞窗口 cwnd 中较小的一个。</p><ul><li>发送窗口上限值 &#x3D; min{rwnd, cwnd}</li></ul><h4 id="慢开始和拥塞避免-拥塞避免并不能完全避免拥塞，只是使得网络不容易出现拥塞"><a href="#慢开始和拥塞避免-拥塞避免并不能完全避免拥塞，只是使得网络不容易出现拥塞" class="headerlink" title="慢开始和拥塞避免 (拥塞避免并不能完全避免拥塞，只是使得网络不容易出现拥塞)"></a>慢开始和拥塞避免 (拥塞避免并不能完全避免拥塞，只是使得网络不容易出现拥塞)</h4><h5 id="慢开始算法"><a href="#慢开始算法" class="headerlink" title="慢开始算法"></a>慢开始算法</h5><ul><li><strong>具体方法:</strong> 先发送少量数据探测一下，若没有发生拥塞则适当增大拥塞窗口。(从小到大逐渐增大拥塞窗口 (发送窗口))</li><li><strong>慢开始门限 (ssthresh):</strong> 每经过一个传输轮次 (RTT)，cwnd 就会加倍。cwnd 随轮次指数增长。</li><li>慢开始一直把 cwnd 增大到一个规定的 ssthresh，然后改用拥塞避免算法。</li></ul><h5 id="拥塞避免算法"><a href="#拥塞避免算法" class="headerlink" title="拥塞避免算法"></a>拥塞避免算法</h5><ul><li><strong>具体方法:</strong> 每经过一个往返时延 RTT 就把发送方拥塞窗口 cwnd 加 1，而不是翻倍。</li><li><strong>过程:</strong><ul><li>cwnd &lt; ssthresh, 使用慢开始。</li><li>cwnd &gt; ssthresh, 改用拥塞避免算法。</li><li>cwnd &#x3D; ssthresh, 通常使用拥塞避免算法，也可以使用慢开始。</li></ul></li></ul><h4 id="网络拥塞处理"><a href="#网络拥塞处理" class="headerlink" title="网络拥塞处理"></a>网络拥塞处理</h4><p>无论在何阶段，只要发送方判断网络出现拥塞，就首先把慢开始门限 ssthresh 设置为出现拥塞时发送方 cwnd 值的一般 (不能小于 2)，然后把 cwnd 重新设置为 1，继而执行慢开始算法。<br><strong>注意:</strong> 慢开始阶段，如果 2<em>cwnd &gt; ssthresh，则下一个 RTT 后 cwnd 等于 ssthresh，而非 2</em>cwnd。</p><h4 id="快重传和快恢复"><a href="#快重传和快恢复" class="headerlink" title="快重传和快恢复"></a>快重传和快恢复</h4><h5 id="快重传概述"><a href="#快重传概述" class="headerlink" title="快重传概述"></a>快重传概述</h5><p>个别报文段在网络中丢失，但是此时网络其实并未发生拥塞，但发送方收不到确认就会误认为网络发生了拥塞，从而启动慢开始算法降低传输效率。</p><h5 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h5><p>使发送方尽早尽快地进行重传，不等计时器超时再重传。接收方即使受到了失序的报文段也要立即发出对已收到的报文段的重复确认。发送方一旦连续收到 3 个冗余 ACK (重复确认)，就立即重传相应的报文段。</p><h5 id="快恢复原理"><a href="#快恢复原理" class="headerlink" title="快恢复原理"></a>快恢复原理</h5><p>当发送方收到 3 个冗余 ACK (重复确认) 时，执行 “乘法减小”，把慢开始门限 ssthresh 调整为当前 cwnd 的一半。发送方此时认为网络很可能没有发生拥塞。并把 cwnd 值夜调整为当前 cwnd 的一半，此时 cwnd 等于 ssthresh，然后开始执行拥塞避免算法。<br>(此处原文有一张图片，展示了 TCP 拥塞控制的慢开始、拥塞避免、快重传和快恢复四种算法的结合图。)</p><h4 id="TCP-拥塞控制机制中四种算法的同时应用"><a href="#TCP-拥塞控制机制中四种算法的同时应用" class="headerlink" title="TCP 拥塞控制机制中四种算法的同时应用"></a>TCP 拥塞控制机制中四种算法的同时应用</h4><p>TCP 连接建立和网络出现超时时，采用慢开始和拥塞避免算法 (ssthresh&#x3D;cwnd&#x2F;2, cwnd&#x3D;1)。<br>发送方收到 3 个冗余 ACK 时，采用快重传和快恢复算法 (ssthresh&#x3D;cwnd&#x2F;2, cwnd&#x3D;ssthresh)。</p><h3 id="习题查漏补缺-1"><a href="#习题查漏补缺-1" class="headerlink" title="习题查漏补缺"></a>习题查漏补缺</h3><ol><li>在 TCP 首部中没有目标主机 IP 地址。</li><li>TCP 报文段和 UDP 报文段都包含源端口、目的端口、检验号。因为 UDP 提供不可靠的传输服务，所以不需要对报文进行编号，不会有序列号字段。相比之下，TCP 需要有序列号字段。</li><li>TCP 的滑动窗口协议中规定重传分组的数量最多可以是滑动窗口的大小。</li><li>假设 TCP 客户与 TCP 服务器的通信已结束，端到端的往返时间为 RTT。t 时刻 TCP 客户请求断开连接，则从 t 时刻起 TCP 服务器释放该连接的最短时间是 <strong>1.5 个 RTT</strong>。<ul><li><strong>1.5 个 RTT</strong>。t 时刻 TCP 客户请求断开连接，发出连接释放 FIN 报文段。当 TCP 服务器收到 TCP 客户发来的 FIN 报文段后不能再发送数据，因此同时发出确认 ACK 报文段和连接释放 FIN 报文段，即直接跳过 CLOSED-WAIT 状态。TCP 客户收到 FIN 报文段后必须发出确认，TCP 服务器收到确认后就进入 CLOSED 状态，共经历 1.5 个 RTT。</li></ul></li><li>TCP 采用对 <strong>【报文段】</strong> 的确认机制。</li><li>TCP 中滑动窗口的值设置得太大，对主机的影响是 <strong>【由于传送的数据过多而使路由器变得拥挤，主机可能丢失分组】</strong>。</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> 408 </tag>
            
            <tag> 计算机考研 </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【数据结构】第二章-线性表</title>
      <link href="/2025/03/25/1558/"/>
      <url>/2025/03/25/1558/</url>
      
        <content type="html"><![CDATA[<h1 id="【数据结构】第二章-线性表"><a href="#【数据结构】第二章-线性表" class="headerlink" title="【数据结构】第二章-线性表"></a>【数据结构】第二章-线性表</h1><h2 id="线性表的定义"><a href="#线性表的定义" class="headerlink" title="线性表的定义"></a>线性表的定义</h2><p>线性表是具有相同数据类型的n（n≥0）个数据元素的有限序列，其中n为表长，当n&#x3D;0时线性表是一个空表。</p><h2 id="线性表的基本操作"><a href="#线性表的基本操作" class="headerlink" title="线性表的基本操作"></a>线性表的基本操作</h2><ol><li><strong>InitList(&amp;L)</strong>: 初始化表。构造一个空的线性表L，分配内存空间。</li><li><strong>DestroyList(&amp;L)</strong>: 销毁操作。销毁线性表，并释放线性表L所占用的内存空间。</li><li><strong>ListInsert(&amp;L,i,e)</strong>: 插入操作。在表L中的第i个位置上插入指定元素e。</li><li><strong>ListDelete(&amp;L,i,&amp;e)</strong>: 删除操作。删除表L中第i个位置的元素，并用e返回删除元素的值。</li><li><strong>LocateElem(L,e)</strong>: 按值查找操作。在表L中查找具有给定关键字值的元素。</li><li><strong>GetElem(L,i)</strong>: 按位查找操作。获取表L中第i个位置的元素的值。</li></ol><h2 id="线性表的特点"><a href="#线性表的特点" class="headerlink" title="线性表的特点"></a>线性表的特点</h2><ol><li>表中元素的个数有限</li><li>表中元素具有逻辑上的顺序性，在序列中各元素排列有其先后次序</li><li>表中元素都是数据元素，每个元素都是单个元素</li><li>表中元素的数据类型都相同，这意味着每个元素占有相同大小的存储空间</li><li>表中元素具有抽象性，即仅讨论元素间的逻辑关系，而不考虑元素究竟表示什么内容</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> 数据结构 </tag>
            
            <tag> 408 </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 线性表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【数据结构】第一章-基本概念</title>
      <link href="/2025/03/25/1556/"/>
      <url>/2025/03/25/1556/</url>
      
        <content type="html"><![CDATA[<h1 id="数据结构基础概念"><a href="#数据结构基础概念" class="headerlink" title="数据结构基础概念"></a>数据结构基础概念</h1><h2 id="一、基本概念"><a href="#一、基本概念" class="headerlink" title="一、基本概念"></a>一、基本概念</h2><ol><li><p>**数据：**信息的载体。数据是计算机程序加工的原料。</p></li><li><p>**数据元素：**数据的基本单位，通常作为一个整体进行考虑。一个数据元素可以由若干数据项组成。如学生记录。</p></li><li><p>**数据项：**构成数据元素的最小单位。如学号，姓名。</p></li><li><p>**数据对象：**具有相同性质的数据元素的集合，是数据的一个子集。</p></li><li><p>**数据类型：**数据类型是一个值的集合和定义在此集合上的一组操作的总称。</p><ul><li>原子类型：其值不可再分的数据类型</li><li>结构类型：其值可以再分解为若干成分的数据类型</li><li>抽象数据类型：一个数学模型及定义在该数学模型上的一组操作，它通常是对数据的某种抽象，定义了数据的取值范围及其结构形式，以及对数据操作的集合。</li></ul></li><li><p>**数据结构：**是相互之间存在一种或多种特定关系的数据元素的集合。数据元素相互之间的关系称为【结构】。数据结构包括三方面【三要素】的内容：【逻辑结构】、【存储结构】和【数据的运算】</p></li><li><p><strong>数据结构的研究内容</strong></p><ul><li>数据如何组织</li><li>数据如何存储</li><li>数据如何运算</li></ul></li><li><p>**逻辑结构和存储结构：**一个算法的设计取决于所选定的【逻辑结构】，而算法的实现依赖于所采用的的【存储结构】。</p><ul><li><p>**逻辑结构：**指数据元素之间的逻辑关系，即从逻辑关系上描述数据。**与数据的存储无关。**分为【线性结构】（典型的如【线性表】）和【非线性结构】。</p><table><thead><tr><th>类型</th><th>关系特征</th><th>典型结构</th></tr></thead><tbody><tr><td>集合</td><td>无特定关系</td><td>-</td></tr><tr><td><strong>线性结构</strong></td><td>一对一</td><td>线性表&#x2F;栈&#x2F;队列&#x2F;串</td></tr><tr><td>树形结构</td><td>一对多</td><td>树&#x2F;二叉树</td></tr><tr><td>图状结构</td><td>多对多</td><td>图</td></tr></tbody></table></li><li><p>**存储结构：**指数据结构在计算机中的表示（映像），也称【物理结构】。它包括【数据元素的表示】和【关系的表示】。存储结构依赖于计算机语言。</p><table><thead><tr><th>类型</th><th>特点</th><th>优缺点</th></tr></thead><tbody><tr><td>顺序存储</td><td>逻辑相邻 → 物理相邻</td><td>✅ 随机存取<br>❌ 外部碎片多</td></tr><tr><td>链式存储</td><td>指针表示逻辑关系</td><td>✅ 空间利用率高<br>❌ 只能顺序存取</td></tr><tr><td>索引存储</td><td>建立索引表（关键字+地址）</td><td>✅ 检索快<br>❌ 额外空间+修改耗时</td></tr><tr><td>散列存储</td><td>哈希函数计算存储地址</td><td>✅ 增删查快<br>❌ 哈希冲突需处理</td></tr></tbody></table></li></ul></li></ol><h2 id="二、算法和算法评价"><a href="#二、算法和算法评价" class="headerlink" title="二、算法和算法评价"></a>二、算法和算法评价</h2><ol><li><strong>算法定义</strong></li></ol><table><thead><tr><th>术语</th><th>说明</th><th>示例&#x2F;补充说明</th></tr></thead><tbody><tr><td><strong>算法</strong></td><td>对特定问题求解步骤的一种描述，是指令的有限序列</td><td>如排序算法、搜索算法等</td></tr><tr><td><strong>指令序列</strong></td><td>由基本操作组成的有限步骤</td><td>包含输入、处理、输出三个阶段</td></tr></tbody></table><ol start="2"><li><strong>算法的五大特征</strong></li></ol><table><thead><tr><th>特征</th><th>描述</th><th>重要性说明</th></tr></thead><tbody><tr><td><strong>有穷性</strong></td><td>必须在有穷步后结束，每一步可在有穷时间内完成</td><td>避免无限循环</td></tr><tr><td><strong>确定性</strong></td><td>每条指令有确切含义，相同输入必得相同输出</td><td>保证结果可靠性</td></tr><tr><td><strong>可行性</strong></td><td>操作可通过基本运算有限次实现</td><td>确保可执行性</td></tr><tr><td><strong>输入</strong></td><td>有零个或多个特定集合的输入</td><td>零输入如随机数生成</td></tr><tr><td><strong>输出</strong></td><td>有一个或多个确定的输出</td><td>无输出则无意义</td></tr></tbody></table><ol start="3"><li><strong>优质算法的特征</strong></li></ol><table><thead><tr><th>特征</th><th>说明</th><th>评估标准</th></tr></thead><tbody><tr><td><strong>正确性</strong></td><td>能准确解决问题</td><td>通过测试用例验证</td></tr><tr><td><strong>可读性</strong></td><td>代码清晰易理解</td><td>命名规范、注释完整</td></tr><tr><td><strong>健壮性</strong></td><td>能处理非法输入</td><td>边界条件处理</td></tr><tr><td><strong>时间效率</strong></td><td>执行速度快</td><td>时间复杂度低</td></tr><tr><td><strong>空间效率</strong></td><td>内存占用少</td><td>空间复杂度低</td></tr></tbody></table><ol start="4"><li><strong>效率度量指标</strong></li></ol><ul><li>时间复杂度分析</li></ul><table><thead><tr><th>概念</th><th>定义</th><th>典型示例</th></tr></thead><tbody><tr><td><strong>频度</strong></td><td>语句被重复执行的次数</td><td>循环体内的操作</td></tr><tr><td><strong>T(n)</strong></td><td>基本运算执行次数函数</td><td>如3n²+2n+1</td></tr><tr><td><strong>O(n)</strong></td><td>渐进时间复杂度</td><td>忽略低阶项和常数</td></tr><tr><td><strong>O(1)</strong></td><td>常数时间复杂度</td><td>哈希查找</td></tr><tr><td><strong>O(logn)</strong></td><td>对数复杂度</td><td>二分查找</td></tr><tr><td><strong>O(n)</strong></td><td>线性复杂度</td><td>顺序查找</td></tr><tr><td><strong>O(nlogn)</strong></td><td>线性对数复杂度</td><td>快速排序</td></tr><tr><td><strong>O(n²)</strong></td><td>平方复杂度</td><td>冒泡排序</td></tr></tbody></table><ul><li>空间复杂度分析</li></ul><table><thead><tr><th>类型</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><strong>固定空间</strong></td><td>输入输出以外的固定需求</td><td>简单变量</td></tr><tr><td><strong>可变空间</strong></td><td>动态分配的空间</td><td>递归栈</td></tr><tr><td><strong>O(1)</strong></td><td>原地算法</td><td>冒泡排序</td></tr><tr><td><strong>O(n)</strong></td><td>线性空间</td><td>归并排序</td></tr></tbody></table><ol start="5"><li><strong>递归算法分析</strong></li></ol><table><thead><tr><th>方法</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td><strong>递推公式法</strong></td><td>T(n)&#x3D;aT(n&#x2F;b)+f(n)</td><td>分治算法</td></tr><tr><td><strong>递归树法</strong></td><td>可视化递归过程</td><td>多层递归</td></tr><tr><td><strong>主定理法</strong></td><td>快速求解特定递推式</td><td>标准分治</td></tr></tbody></table><ol start="6"><li><strong>常见算法对比</strong></li></ol><table><thead><tr><th>算法</th><th>时间复杂度</th><th>空间复杂度</th><th>特点</th></tr></thead><tbody><tr><td>冒泡排序</td><td>O(n²)</td><td>O(1)</td><td>简单但效率低</td></tr><tr><td>快速排序</td><td>O(nlogn)</td><td>O(logn)</td><td>平均性能最好</td></tr><tr><td>归并排序</td><td>O(nlogn)</td><td>O(n)</td><td>稳定但需额外空间</td></tr><tr><td>二分查找</td><td>O(logn)</td><td>O(1)</td><td>前提是有序表</td></tr></tbody></table><ol start="7"><li><strong>优化策略</strong></li></ol><table><thead><tr><th>策略</th><th>实现方式</th><th>效果</th></tr></thead><tbody><tr><td>空间换时间</td><td>使用哈希表</td><td>O(n)→O(1)</td></tr><tr><td>分治法</td><td>将问题分解</td><td>O(n²)→O(nlogn)</td></tr><tr><td>动态规划</td><td>存储中间结果</td><td>指数→多项式</td></tr><tr><td>剪枝策略</td><td>减少不必要的计算</td><td>提升实际效率</td></tr></tbody></table><h2 id="三、第一章习题总结"><a href="#三、第一章习题总结" class="headerlink" title="三、第一章习题总结"></a>三、第一章习题总结</h2><ol><li><strong>数据类型分类</strong></li></ol><table><thead><tr><th>类型</th><th>定义</th><th>特点</th><th>示例</th></tr></thead><tbody><tr><td><strong>单型数据类型</strong></td><td>数据元素类型固定</td><td>单一数据类型</td><td>整型、实型、字符串</td></tr><tr><td><strong>多型数据类型</strong></td><td>可包含多种数据类型</td><td>元素类型灵活</td><td>栈、队列、树、图</td></tr></tbody></table><blockquote><p><strong>注</strong>：多型数据结构中元素可以是单型数据，也可以是其他结构数据</p></blockquote><ol start="2"><li><strong>数据结构与数据类型</strong></li></ol><table><thead><tr><th>概念</th><th>形式化定义</th><th>组成要素</th><th>区别</th></tr></thead><tbody><tr><td><strong>数据结构</strong></td><td>(D, R)</td><td>D: 数据对象<br>R: 数据关系</td><td>关注数据组织方式</td></tr><tr><td><strong>数据类型</strong></td><td>(D, R, P)</td><td>增加P: 基本操作集</td><td>包含操作定义</td></tr></tbody></table><ol start="3"><li><strong>数据结构基本概念</strong></li></ol><table><thead><tr><th>概念</th><th>定义</th><th>说明</th><th>常见误区</th></tr></thead><tbody><tr><td><strong>数据项</strong></td><td>数据的最小单位</td><td>不可分割的基本单元</td><td>如学生记录中的”学号”</td></tr><tr><td><strong>逻辑结构</strong></td><td>数据元素间的抽象关系</td><td>与内容形式无关</td><td>独立于物理存储</td></tr><tr><td><strong>物理结构</strong></td><td>计算机中的存储方式</td><td>包含：<br>• 数据元素<br>• 元素间关系</td><td>如顺序&#x2F;链式存储</td></tr></tbody></table><ol start="4"><li><strong>存储结构对比</strong></li></ol><table><thead><tr><th>类型</th><th>关系表示方式</th><th>特点</th><th>示例</th></tr></thead><tbody><tr><td><strong>顺序存储</strong></td><td>物理位置相邻</td><td>无需额外存储关系</td><td>数组</td></tr><tr><td><strong>链式存储</strong></td><td>显式指针链接</td><td>动态分配内存</td><td>链表</td></tr></tbody></table><ol start="5"><li><strong>算法特性</strong></li></ol><table><thead><tr><th>特性</th><th>说明</th><th>重要性</th></tr></thead><tbody><tr><td><strong>语言无关性</strong></td><td>独立于具体语言和计算机</td><td>算法优劣的本质属性</td></tr><tr><td><strong>效率规律</strong></td><td>语言级别↑ → 执行效率↓</td><td>高级语言vs机器码</td></tr></tbody></table><ol start="6"><li><strong>时间复杂度分析</strong></li></ol><table><thead><tr><th>概念</th><th>定义</th><th>关键点</th><th>经典案例</th></tr></thead><tbody><tr><td><strong>时间复杂度</strong></td><td>最坏情况下执行时间的上界</td><td>取决于：<br>• 问题规模(n)<br>• 数据初态</td><td>汉诺塔O(2ⁿ)</td></tr><tr><td><strong>基本操作</strong></td><td>最深层循环内的操作</td><td>统计执行次数</td><td>循环体内的核心操作</td></tr></tbody></table><ol start="7"><li><strong>常见误区澄清</strong></li></ol><table><thead><tr><th>错误观点</th><th>正解</th><th>反例</th></tr></thead><tbody><tr><td>“所有数据结构都有插入、删除、查找”</td><td>基本操作取决于结构特性</td><td>二维数组无插入删除功能</td></tr><tr><td>“存储结构需要额外存储元素关系”</td><td>顺序存储通过物理位置隐含关系</td><td>数组不需要指针表示相邻关系</td></tr></tbody></table><ol start="8"><li><strong>设计原则</strong></li></ol><table><thead><tr><th>原则</th><th>内涵</th><th>实践意义</th></tr></thead><tbody><tr><td><strong>抽象封装</strong></td><td>定义与实现分离</td><td>数据结构变化不影响应用</td></tr><tr><td><strong>操作独立性</strong></td><td>应用与存储结构解耦</td><td>便于底层优化调整</td></tr></tbody></table><ol start="9"><li><strong>抽象数据类型(ADT)</strong></li></ol><table><thead><tr><th>特征</th><th>说明</th><th>设计要点</th></tr></thead><tbody><tr><td><strong>逻辑特性优先</strong></td><td>仅关注数学特性</td><td>定义规范接口</td></tr><tr><td><strong>实现无关性</strong></td><td>不限定内部表示</td><td>允许性能优化</td></tr><tr><td><strong>稳定性</strong></td><td>接口不变则外部无感知</td><td>契约式编程</td></tr></tbody></table><p><strong>补充说明</strong></p><ol><li><p><strong>汉诺塔复杂度证明</strong>：</p><ul><li>递推式：T(n) &#x3D; 2T(n-1) + 1</li><li>解方程得O(2ⁿ)</li></ul></li><li><p><strong>操作设计准则</strong>：</p><ul><li>基本操作应完备且正交</li><li>避免暴露内部实现细节</li></ul></li><li><p><strong>物理结构本质</strong>：</p><ul><li>必须完整存储：<ul><li>数据元素本身</li><li>元素间逻辑关系的物理表示</li></ul></li></ul></li><li><p>【习题】数据结构被形式定义为（D，S), 其中D是<code>(   )</code>的有限集合，S是D上的<code>(   )</code>有限的集合。 </p><p>A、算法</p><p>B、数据元素</p><p>C、数据操作</p><p>D、逻辑结构</p><p>E、操作</p><p>F、映像</p><p>G、存储</p><p>H、关系</p></li></ol><blockquote><p>正确答案：<em><strong>BH</strong></em></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 数据结构 </tag>
            
            <tag> 408 </tag>
            
            <tag> 计算机考研 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【计算机网络】第四章-网络层(上)</title>
      <link href="/2025/03/24/2121/"/>
      <url>/2025/03/24/2121/</url>
      
        <content type="html"><![CDATA[<h1 id="4-1-网络层的功能"><a href="#4-1-网络层的功能" class="headerlink" title="4.1 网络层的功能"></a>4.1 网络层的功能</h1><h2 id="网络层的功能"><a href="#网络层的功能" class="headerlink" title="网络层的功能"></a>网络层的功能</h2><ul><li><strong>主要任务</strong>：将分组从源主机经过多个网络和多段链路传输到目的主机<ul><li>分组转发：路由器根据转发表将分组从合适的端口转发出去（数据平面），转发的依据是IP地址（网络层通过IP地址来标识主机）</li><li>路由选择：根据路由协议构造路由表，经常&#x2F;定期与相邻路由器交换信息，更新维护路由表（转发平面）</li></ul></li><li>网络抽象划分：可以将网络抽象划分为数据平面（转发平面）和控制平面。</li></ul><h2 id="TCP-IP体系的网络层"><a href="#TCP-IP体系的网络层" class="headerlink" title="TCP&#x2F;IP体系的网络层"></a>TCP&#x2F;IP体系的网络层</h2><ol><li>提供无连接的数据报服务，由用户主机来保证通信的可靠性。</li><li>只向上提供简单灵活的、无连接的、尽最大努力交付的数据报服务</li><li>所传送分组可能出错、丢失、重复、失序或超时。</li></ol><h2 id="异构网络互连（网络层的任务之一）"><a href="#异构网络互连（网络层的任务之一）" class="headerlink" title="异构网络互连（网络层的任务之一）"></a>异构网络互连（网络层的任务之一）</h2><ul><li><p><strong>网络互连</strong>：将两个以上的计算机网络，通过一定的方法，用一些中继系统相互连接起来，以构成更大的网络系统。<strong>通常是指用路由器进行网络连接路由选择。</strong></p></li><li><p><strong>异构网络</strong>：数据链路层和物理层均不同。</p><p>【异构性】指（在物理层和数据链路层中定义的）传输介质、数据编码方式、链路控制协议及不同的数据单元格式和转发机制。</p></li><li><p><strong>中继系统</strong></p><ul><li>物理层中继系统：转发器，集线器</li><li>数据链路层中继系统：网桥和交换机</li><li>网络层中继系统：路由器</li><li>网络层以上的中继系统：网关</li></ul></li></ul><h2 id="虚拟互联网络"><a href="#虚拟互联网络" class="headerlink" title="虚拟互联网络"></a>虚拟互联网络</h2><ol><li>也就是逻辑互联网络。</li><li>互联起来的各种物理网络的异构性本来是客观存在的，但是通过IP协议就可使这些性能各异的网络在网络层上看起来像是一个统一的网络。</li><li>使用IP协议的虚拟互联网络简称为IP网络<ul><li>优点：IP网上主机进行通信时，就好像在单个网络上通信一样。看不见具体异构细节。</li></ul></li></ol><h2 id="路由与转发"><a href="#路由与转发" class="headerlink" title="路由与转发"></a>路由与转发</h2><table><thead><tr><th>概念</th><th>说明</th></tr></thead><tbody><tr><td>分组转发</td><td>路由器根据转发表将分组从合适的端口转发出去</td></tr><tr><td>路由选择</td><td>根据路由协议构造路由表，经常&#x2F;定期与相邻路由器交换信息，更新维护路由表</td></tr><tr><td>路由表</td><td>根据路由选择算法得出</td></tr><tr><td>转发表</td><td>从路由表得出</td></tr></tbody></table><p>路由表的表项包括：</p><ul><li>目的地址：表示IP包的目的地址或目的网络；</li><li>网络掩码：与目的地址一起标识目的主机或者路由器所在的网段的地址</li><li>pre：标示路由加入IP路由表的优先级（因为到达一个目的地有多条路由）</li><li>cost：路由开销，同上，但是给出的是开销</li><li>interface：输出接口，指明IP包将从路由器哪个接口转发</li><li>nexthop：下一跳IP地址，说明IP包所经过的下一个路由器</li></ul><p>请注意：</p><ul><li>路由器只保留到达目的地址的下一个路由器的地址，不保留整个传输路径的信息。采用目的网络，则只需包含目的网络和到达该目的网络路径上的下一个路由器的IP地址即可。</li><li>每个路由器根据路由表来选择IP分组的下一跳地址。主机仅知道到达本地网络的路径，要去往其他网络，那么需要把IP分组交给路由器。路由器和源主机都不知道IP分组要经过的完整路径。</li></ul><h2 id="网络层向其上层提供的两种服务"><a href="#网络层向其上层提供的两种服务" class="headerlink" title="网络层向其上层提供的两种服务"></a>网络层向其上层提供的两种服务</h2><ol><li>面向连接的虚电路服务</li><li>无连接的数据报服务</li></ol><table><thead><tr><th></th><th>数据报服务</th><th>虚电路服务</th></tr></thead><tbody><tr><td>连接的建立</td><td>不需要</td><td>必须有</td></tr><tr><td>目的地址</td><td>每个分组都有完整的目的地址</td><td>仅在建立连接阶段使用,之后每个分组使用长度较短的虚电路号</td></tr><tr><td>路由选择</td><td>每个分组独立地进行路由选择和转发</td><td>属于同一条虚电路的分组按照同一路由转发</td></tr><tr><td>分组顺序</td><td>不保证分组的有序到达</td><td>保证分组的有序到达</td></tr><tr><td>可靠性</td><td>不保证可靠通信，可靠性由用户主机来保证</td><td>可靠性由网络保证</td></tr><tr><td>对网络故障的适应性</td><td>出故障的结点丢失分组,其他分组路径选择发生变化时可以正常传输</td><td>所有经过故障结点的虚电路均不能正常工作</td></tr><tr><td>差错处理和流量控制</td><td>由用户主机进行流量控制，不保证数据报的可靠性</td><td>可由分组交换网负责，也可由用户主机负责</td></tr></tbody></table><h1 id="虚电路与数据报"><a href="#虚电路与数据报" class="headerlink" title="虚电路与数据报"></a>虚电路与数据报</h1><h2 id="虚电路服务"><a href="#虚电路服务" class="headerlink" title="虚电路服务"></a>虚电路服务</h2><ul><li><p><strong>概述</strong>：两台计算机进行通信时首先建立网络层的连接（一条逻辑上的虚电路，VC，不是物理连接。），连接建立后就固定了虚电路对应的物理路径</p><p>比较：采用电路交换的电话通信<strong>则</strong>是建立一条真正的物理连接。</p></li><li><p><strong>特点</strong>：</p><ul><li>“虚”：指的是这条电路<strong>不是专用</strong>的。一段物理链路可以有很多条虚电路。<br> 节点到其他节点之间的链路可能同时有若干条虚电路通过，亦或是建立。<strong>也不需要为每条VC预分配带宽。</strong></li><li>核心思想：可靠通信由网络自身来保证。</li></ul></li></ul><p><strong>通信过程</strong>（三个阶段）：</p><ol><li>虚电路建立<ul><li>每次建立将一个未用过的虚电路号（VCID）分配给虚电路。</li><li>分组的首部仅在连接建立时使用完整的目的地址，之后每个分组的首部只需携带虚电路编号即可。</li><li>【动作】 A发“呼叫请求”分组，B收到并同意连接，发送“呼叫应答”分组进</li></ul></li><li>数据传输<ul><li>建立虚电路后，AB可以相互传送数据分组</li></ul></li><li>虚电路释放<ul><li>结束后，A发“请求释放”分组拆除虚电路；</li><li>整个连接逐个断开。</li></ul></li></ol><p><strong>虚电路服务的特点</strong></p><table><thead><tr><th>特点</th><th>详述</th></tr></thead><tbody><tr><td>时间开销大</td><td>建立和拆除需要时间开销；<br />对于交互式应用、少量短分组场景浪费；<br />对于长时间频繁数据交换效率高。</td></tr><tr><td>路由选择的体现</td><td>路由选择体现在建立阶段。</td></tr><tr><td>可靠、对端点的流量控制<br />（保证分组有序到达）</td><td>提供可靠通信功能，保证每个分组正确、有序地到达；<br />可以对两个端点流量进行控制，通知发送方暂缓发送</td></tr><tr><td><strong>致命弱点</strong></td><td>某个节点或某条链路出现故障、彻底失效时，会破坏经过这个节点或链路的虚电路。</td></tr><tr><td>相对数据报方式开销小</td><td>分组首部不包含目的地址，而是虚电路号。</td></tr></tbody></table><h2 id="数据报服务"><a href="#数据报服务" class="headerlink" title="数据报服务"></a>数据报服务</h2><p><strong>概述</strong></p><ul><li>网络在发送分组前不需要先建立连接；</li><li>源主机的高层协议将报文拆成若干较小的数据段，并加上地址等控制信息后构成分组；</li><li>中间阶段存储分组很短一段时间，找到路由后尽快转发给每个分组。</li><li><strong>网络层不提供服务质量承诺</strong>。不提供端到端的可靠传输服务。所以路由器比较简单，造价低廉。复杂的网络功能置于因特网边缘（用户主机及其内部运输层）</li></ul><p><strong>通信过程</strong>：A向B发送分组</p><table><thead><tr><th>步骤</th><th>详述</th></tr></thead><tbody><tr><td>主机A发给交换节点</td><td>主机A先将分组逐个发往与之直接相连的交换节点，交换节点缓存分组</td></tr><tr><td>查找转发表</td><td>交换节点查找自己的转发表，转发给别的交换节点</td></tr><tr><td>继续转发直到抵达B</td><td>其他交换节点也类似地继续转发，直到B收到</td></tr></tbody></table><p><strong>数据报服务特点</strong></p><table><thead><tr><th>特点</th><th>详述</th></tr></thead><tbody><tr><td>无须建立连接</td><td>发送方随时发送，接收方随时接收</td></tr><tr><td>不保证可靠</td><td>网络只是尽最大努力交付。分组可能丢失。由于每个分组路由选择转发都是独立的，所以路径可能不同，分组也不一定按序到达</td></tr><tr><td>需完整地址</td><td>需要包括发送方和接收方的完整地址，这样才能独立传输</td></tr><tr><td>视情况丢弃</td><td>分组在交换节点处的存储转发需要排队等候，产生时延，网络拥塞时视情况丢弃部分分组</td></tr><tr><td>适应能力强</td><td>对于冗余和故障路径，相应地更新转发表，对故障适应能力强</td></tr></tbody></table><p><strong>优点</strong>：网络造价大大降低。运行方式灵活。适用多种应用场景。</p><h1 id="SDN（软件定义网络）"><a href="#SDN（软件定义网络）" class="headerlink" title="SDN（软件定义网络）"></a>SDN（软件定义网络）</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>一种创新网络架构。采用<strong>集中式的控制平面</strong>和<strong>分布式的数据平面</strong>。两平面<strong>彼此分离</strong>。</p><h2 id="控制平面"><a href="#控制平面" class="headerlink" title="控制平面"></a>控制平面</h2><p>SDN利用<strong>控制—数据接口</strong>对数据平面上的路由器进行集中式控制，方便软件控制网络。</p><h2 id="传统网络中的路由器"><a href="#传统网络中的路由器" class="headerlink" title="传统网络中的路由器"></a>传统网络中的路由器</h2><ul><li><p>既有转发表又有路由选择软件；</p></li><li><p>既有数据平面又有控制平面。</p></li></ul><h2 id="SDN结构"><a href="#SDN结构" class="headerlink" title="SDN结构"></a>SDN结构</h2><p>不再需要路由选择软件（路由器之间不再相互交换路由信息）；</p><p>路由器只是做简单工作：收到分组、查找转发表、转发分组。那么如何得知路由信息？</p><p>网络控制平面有一个逻辑上的<strong>远程控制器(不在SDN交换机中，而位于网络中心位置)</strong>：</p><ul><li>掌握各主机和整个网络状态，并为每个分组计算出最佳路由；</li><li>通过Openflow协议（这是南向接口协议）把转发表下发给路由器。它取代了路由协议。</li></ul><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul><li><strong>可编程性</strong>：为开发者提供强大编程接口。北向接口、南向接口、东西向接口<ul><li>北向接口：SDN对上层应用开发者提供北向接口（有丰富的API，不必关心底层硬件细节）；</li><li>南向接口：SDN控制器和转发设备建立双向会话的接口。通过南向接口SDN控制器可兼容不同硬件设备</li><li>东西向接口：SDN控制器集群内部控制器之间的通信接口。用于增强整个控制平面的可靠性和可拓展性。</li></ul></li><li><strong>优点</strong>：<ol><li>全局集中式控制和分布式高速转发</li><li>灵活可编程与性能平衡：由专有的自动化工具以编程方式配置</li><li>降低成本：网络设备的制造与功能软件的开发相分离</li></ol></li><li><strong>缺点</strong>：<ol><li>安全风险：集中管理受攻击崩溃会影响整个网络</li><li>规模瓶颈：网络规模扩大后，控制器将成为网络性能的瓶颈</li></ol></li></ul><h1 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h1><p><strong>拥塞</strong>：过量分组引起网络性能下降</p><p><strong>判断拥塞状态</strong>：</p><ul><li>随着网络负载增加，网络吞吐量明显小于正常吞吐量 -&gt; 轻度拥塞</li><li>网络吞吐量随着网络负载增大反而下降 -&gt; 可能已进入拥塞</li></ul><p><strong>拥塞控制目标</strong>：</p><ul><li>获取发生拥塞的信息，利用信息进行控制；确保网络能够承载所达到的流量</li><li>【比较】流量控制指发送方和接收方之间的点对点通信量控制，抑制发送方的发送速率。</li></ul><p><strong>拥塞控制方法</strong>：</p><ul><li>开环控制：（静态方法）设计时就事先考虑到发生拥塞的因素：确定何时可接受新流量、何时可丢弃分组。(做决定时不考虑当前网络状态)</li><li>闭环控制：（动态方法，反馈回路）采用监测系统来监视，检测到拥塞后把拥塞信息发送给合适地方，来调整网络运行。</li></ul><h1 id="4-1总结补充"><a href="#4-1总结补充" class="headerlink" title="4.1总结补充"></a>4.1总结补充</h1><p>一、<strong>路由器</strong>互联的多个局域网的结构中要求每个局域网（物理层、数据链路层、网络层协议可以不同，但是网络层之上的协议必须相同）原因：路由器是第三层设备，他只能影响所在的网络层及以下，再往上并不能影响到。</p><ul><li>关于网络层协议不同而实现互联的eg：IPV4和IPV6网络</li></ul><p>二、路由器和交换机</p><table><thead><tr><th>路由器</th><th>工作在网络层，不转发广播包，能够分隔广播域，抑制广播风暴；  路由器互连多个网络，不仅有多个IP地址，还有多个硬件地址</th></tr></thead><tbody><tr><td>交换机</td><td>工作在数据链路层，能够分隔冲突域，不能分隔广播域</td></tr><tr><td>集线器</td><td>工作在物理层，不能分隔广播域也不能分隔冲突域</td></tr></tbody></table><p>三、电路交换、报文交换、数据报交换、虚电路交换</p><table><thead><tr><th>电路交换</th><th>无差错控制功能。</th></tr></thead><tbody><tr><td>报文交换</td><td>交换的数据单元是报文，报文大小不固定（需要较大存储空间），因为大小不固定所以处理时间也不固定，不能用于实时通信环境。</td></tr><tr><td>分组交换</td><td>分为下面两种方式：数据报交换和虚电路交换。 分组交换限制分组大小，超过限制时需分隔。</td></tr><tr><td>数据报交换</td><td>无连接，不可靠；每个分组都是独立选择路由；可能丢失、失序。故障后可以另选路径。  要保证可靠性和有序性需要高层协议（TCP）的支持。</td></tr><tr><td>虚电路交换</td><td>面向连接，可靠；保证可靠有序。 建立连接后，分组走的路径就是固定的。     不适合出错率高的系统，因为很容易出现结点故障。</td></tr></tbody></table><p>四、存储转发机制：<strong>先接收完整个分组</strong>才开始转发分组的第一位</p><h1 id="4-2-IPv4"><a href="#4-2-IPv4" class="headerlink" title="4.2 IPv4"></a>4.2 IPv4</h1><p><strong>概述</strong>：也即网际协议(Internet Protocol,IP), 定义了数据传送的基本单元(IP分组)及其确切数据格式。IPV4地址是给因特网上的每一个主机&#x2F;路由器的每一个接口分配的一个全世界范围内的唯一32比特（IPV6为128比特）的标识符。</p><p><strong>IP数据报</strong>：IP分组也叫IP数据报。包括首部和数据部分。</p><ul><li>首部前两个字节往往以0x45开头，可用于定位IP数据报开始的位置。</li><li>补充：“4”表示版本号，0100。首部的第一个字节前4位表示IP协议的版本。首部长度以32位（四个字）为单位，标准IP首部长度为20字节，20字节&#x2F;4字节&#x3D;5 (行，一行一个字)</li><li>标识：占16bit，作为一个计数器，也是数据报的编号。每产生一个数据报就++，若长度超出MTU，则需要分片，但是分片后的几个数据报的标识都相同，以便重组。（是数据报的编号不是分片的编号）</li><li>标志：占3bit 。标志最低位MF（1表示后面还有分片，0表示最后一个分片），中间位DF&#x3D;0时才允许分片。</li><li>片偏移：占13bit。 指出较长的数据报在分片后某片在原数据报中的相对位置，以8B为偏移单位。除最后一个分片外，每个分片的长度一定是8B的整数倍。</li><li>生存时间（TTL）：8bit，数据报在网络中可通过的路由器数的最大值，也就是数据报的寿命，限制数据报的无限转发。路由器转发数据报前都要使得TTL–，减到0时丢弃。</li><li>协议：8bit，指出携带的数据使用何种协议，应当上交给哪个协议处理。6：TCP     17:UDP</li><li>首部检验和：16bit，但是只检验首部不包括数据。经过一次路由器都要重新计算一次。</li><li>源地址字段：发送方  目的地址字段：接收方  都是IP地址，都占4B</li></ul><table><thead><tr><th>字段基本单位</th><th>首部长度</th><th>总长度</th><th>片偏移</th></tr></thead><tbody><tr><td>偏移量</td><td>4B</td><td>1B</td><td>8B</td></tr></tbody></table><h2 id="IP数据报分片"><a href="#IP数据报分片" class="headerlink" title="IP数据报分片"></a>IP数据报分片</h2><p><strong>最大传送单元（MTU）</strong>：</p><ul><li>一个链路层数据帧能承载的最大数据量。链路层MTU严格限制IP数据报长度。</li><li>取决于链路层协议。 以太网MTU：1500B      许多广域网：&lt;&#x3D;576B</li><li>IP数据报总长度超出MTU时需要分装在多个较小IP数据报中，也就是分片。</li></ul><p><strong>分片重组：</strong></p><ul><li><p>目的主机使用IP首部中的标识、标志和片偏移字段完成重组。</p></li><li><p>过程：目的主机检查数据报的<code>标识号</code>确定哪些数据报属于同一个原始数据报的片。<code>标志位</code>的后两位DF和MF。 </p><ul><li>只有DF&#x3D;0时能被分片。</li><li>MF告知是否是最后一个片。MF&#x3D;1说明有后续。</li><li>片偏移字段指出片应该放在原书IP数据报的哪个位置。</li></ul></li></ul><h2 id="IPv4地址"><a href="#IPv4地址" class="headerlink" title="IPv4地址"></a>IPv4地址</h2><p><strong>概述：</strong>  长度为32，唯一。格式为： {&lt;网络号&gt;，&lt;主机号&gt;}     </p><ul><li>网络号：标志主机&#x2F;路由器连接到的网络。网络号在整个互联网范围内唯一。   </li><li>主机号：标志主机。在网络号指明的网络范围内唯一。</li></ul><p><strong>特殊用途IP地址：</strong></p><table><thead><tr><th>地址</th><th>用途</th></tr></thead><tbody><tr><td>主机号全0</td><td>表示本网络本身。&lt;网络号，0…&gt;</td></tr><tr><td>主机号全1</td><td>表示本网络广播地址（直接广播地址） &lt;网络号，255&gt;</td></tr><tr><td>127.x.x.x</td><td>环回自检地址(Loopback Test)，用于测试网络连接性和配置，不会被路由器转发到其他网络。目的地址为环回地址的IP数据报永远不会也不可能出现在任何网络上。</td></tr><tr><td>全0：0.0.0.0</td><td>本网络上的本主机</td></tr><tr><td>全1：255.255.255.255</td><td>表示整个TCP&#x2F;IP网络的广播地址，也称受限广播地址。实际等效于本网络广播地址。</td></tr></tbody></table><p><strong>三种IP地址：</strong></p><table><thead><tr><th>网路类别</th><th>最大可用网络数</th><th>第一个可用的网络号</th><th>最后一个可用的网络号</th><th>每个网络中的最大主机数</th></tr></thead><tbody><tr><td>A</td><td>2^7-2</td><td>1</td><td>126</td><td>2^24-2</td></tr><tr><td>B</td><td>2^14</td><td>128.0</td><td>191.255</td><td>2^16-2</td></tr><tr><td>C</td><td>2^21</td><td>192.0.0</td><td>223.255.255</td><td>2^8-2</td></tr></tbody></table><p><strong>IP地址特点：</strong></p><table><thead><tr><th>IP地址特点</th><th>概述</th></tr></thead><tbody><tr><td>一种分等级地址结构</td><td>由网络号和主机号构成。IP地址管理机构只分配网络号，主机号有网络自行分配，便于管理。路由器仅根据主机的网络号来转发分组，减少路由表存储占用。</td></tr><tr><td>标志主机或链路接口</td><td>同时连接到两个不同的网络时必须同时具有两个相应IP地址，这时路由器具有两个或以上的IP地址，每个端口都有不同网络号的IP地址（因为是不同网络</td></tr><tr><td>LAN中</td><td>转发器&#x2F;桥接器（网桥等）连接的若干LAN仍是同一个网络，同一个广播域。在LAN中所有主机网络号相同（同一网络），主机号必须不同（不同个体）</td></tr><tr><td>网络平等</td><td>所有分配到网络号的网络平等</td></tr><tr><td>同一局域网</td><td>IP地址里的网络号必须相同</td></tr><tr><td>注意点</td><td>分类编址问题中，划分网络的时候，注意要同时把一群主机连接路由器也划到这群主机里。如下所示：这个网络需要254+1&#x3D;255个地址</td></tr></tbody></table><h2 id="NAT网络地址转换"><a href="#NAT网络地址转换" class="headerlink" title="NAT网络地址转换"></a>NAT网络地址转换</h2><p>**概述：**通过专用网络地址转换为公用地址，从而对外隐藏内部管理的IP地址。</p><ul><li>意义：整个专用网只需要一个全球IP地址就可和互联网</li></ul><p>**私有IP地址(可重用地址)：**用于LAN，不用于WAN</p><ul><li>不能直接用于Internet，必须通过网关利用IP地址转换为Internet中合法的全球IP地址。</li><li>并且允许私有IP地址被LAN重复使用。</li><li>互联网中所有路由器对目的地址为私有地址的数据报一律不进行转发。</li></ul><table><thead><tr><th>类别</th><th>私有IP地址网段</th></tr></thead><tbody><tr><td>1个A类网段</td><td>10.0.0.0~10.255.255.255</td></tr><tr><td>16个B类网段</td><td>172.16.0.0~172.31.255.255</td></tr><tr><td>256个C类网段</td><td>192.168.0.0~192.168.255.255</td></tr></tbody></table><p>**专用互联网：**也称本地互联网，即采用私有IP地址的互联网。</p><p><strong>使用NAT：</strong></p><ul><li>需要在专用网–&gt;互联网的路由器上安装NAT软件。</li><li>NAT路由器至少有一个有效的外部全球IP地址。可使多个私有IP映射到一个全球IP。</li><li>NAT路由器使用NAT转换表进行本地IP地址到全球IP地址的转换</li><li>NAT转换表示例： 每个 LAN 局域网 IP 地址 : 端口号 , 与 WAN 广域网 IP 地址 : 端口号 的对应关系 </li><li>WAN 广域网地址 172.38.1.5 : 44444 , 对应 LAN 局域网地址 192.168.0.3 : 22222</li></ul><ul><li>网段：10.0.0.0&#x2F;8, 172.16.0.0&#x2F;12, 192.168.0.0&#x2F;16</li></ul><p><strong>NAT路由器工作原理</strong>：</p><ol><li>某家庭获得一个全球IP地址，家庭里的三台主机使用私有地址（10.0.0.0网段）。</li><li>用户主机10.0.0.1想发送数据到128.119.40.186:80 ；</li><li>NAT为IP分组生成新端口号，更改源地址为NAT的全球IP地址，更改源端口号为新端口号，并增加表项；</li><li>对方不知道分组已经变换，也不知道专用地址是多少，照常返回数据；</li><li>NAT重新转换，改回原来的端口号和原来的专用地址。</li></ol><h2 id="划分子网-（目的是减少广播域的大小，结果是增加网络数量）"><a href="#划分子网-（目的是减少广播域的大小，结果是增加网络数量）" class="headerlink" title="划分子网 （目的是减少广播域的大小，结果是增加网络数量）"></a>划分子网 （目的是减少广播域的大小，结果是增加网络数量）</h2><p>**概述：**两级IP地址的空间利用率低；给每个网络都划分一个网络后会使得路由表变得过大，降低性能。【改进】增加“子网号字段”，这就得到了三级IP地址。</p><p><strong>基本思路：</strong></p><ol><li>子网划分是内部事务，外部并不知道</li><li>从主机号借用若干位作为子网号。 地址结构变为&lt;网络号&gt;,&lt;子网号&gt;,&lt;主机号&gt;</li><li>路由器的分组转发仍然是按照目的网络号。 只是本单位路由器收到IP数据报后再次根据目的网络号和子网号找到目的子网，然后交付给目的主机。</li></ol><p><strong>子网掩码：</strong></p><ul><li><p>格式：一个与IP地址相对应的32位二进制比特串，由一串1和随后的一串0组成。1对应于IP地址中的网络后及子网号，0对应主机号。</p></li><li><p>用法：由IP地址和子网掩码进行与**（<strong><strong>AND</strong></strong>）**运算可以得出相应的子网的网络地址。</p><p>指明分类IP地址的主机号部分被借用了多少位作为子网号。</p></li><li><p>注意点</p><ul><li>路由器之间交换路由信息时必须将所在网络的子网掩码告诉对方</li><li>一台主机在设置IP地址信息的同时必须设置子网掩码。</li><li>同属于一个子网的所有主机及路由器的相应端口设置相同的子网掩码</li><li>路由器的路由表包含目的网络地址、子网掩码、下一跳地址</li></ul></li></ul><h2 id="无分类编址CIDR-无分类域间路由选择-CIDR无类别域间路由"><a href="#无分类编址CIDR-无分类域间路由选择-CIDR无类别域间路由" class="headerlink" title="无分类编址CIDR (无分类域间路由选择) CIDR无类别域间路由"></a>无分类编址CIDR (无分类域间路由选择) CIDR无类别域间路由</h2><p>**CIDR概述：**在变长子网掩码的基础上提出的一种消除传统A B C类地址及划分子网的概念。使用网络前缀的概念代替网络的概念。分配一个【块】，而不是分配一整类地址。</p><ul><li>与传统分类IP地址的最大区别：网络前缀的位数不固定，可以任意选取</li></ul><p>**记法：**IP地址&#x3D; &lt;网络前缀&gt;, &lt;主机号&gt;</p><p><strong>斜线记法(CIDR记法)</strong>：“IP地址&#x2F;网络前缀所占用的位数”</p><ul><li><p>网络前缀所占用位数对应网络号部分 &#x3D;&#x3D;子网掩码中连续1的部分</p></li><li><p>eg. 128.14.32.5&#x2F;20     掩码为20个连续的1以及随后12个连续的0,“&#x2F;”表示通过逐位“与”的方式来得到该地址的网络前缀。丫就是截取前20位。</p><p>这个IP地址可以写成10000000.00001110.00010000.00000101（写成二进制），子网掩码20为11111111.11111111.11110000.00000000（20个1），与后得到128.14.32.0（网络前缀）</p></li><li><p>可以进一步计算这个IP地址所在地址块的范围（地址块里的最小地址和最大地址）</p><table><thead><tr><th>最小地址(128.14.32.0)</th><th>最大地址(128.14.47.255)</th></tr></thead><tbody><tr><td><u>10000000.00001110.0010</u>0000.00000000</td><td><u>10000000.00001110.0010</u>1111.11111111</td></tr></tbody></table></li><li><p>注意点</p><ul><li>CIDR地址块中的地址数一定是2的整次幂。故可指派地址数一般为2^N-2 （剔除全0和全1）</li><li>地址块里的地址数越多，则网络前缀也就越短</li></ul></li></ul><h2 id="路由聚合-也称构成超网"><a href="#路由聚合-也称构成超网" class="headerlink" title="路由聚合(也称构成超网)"></a>路由聚合(也称构成超网)</h2><p><strong>概述：<strong>路由表中可以利用CIDR地址块来查找目的网络。这种</strong>地址的聚合</strong>称为路由聚合。</p><p><strong>作用</strong>：使路由表中一个项目可以表示多个 原本传统分类地址 的路由，减少路由之间的信息交换，通过网络性能。 （基于CIDR的视角来合并部分网络的路由表项）</p><p><strong>分析</strong>：不使用路由聚合，那么R1到网络1和网络2需要两条路由表项；注意到R1到两个网络的下一跳都是R2，网络1和网络2前16位相同（可以构成一个更大的地址块206.1.0.0&#x2F;16）</p><p><strong>最长前缀匹配</strong>：（也叫最佳匹配）使用CIDR时路由表各项由“网络前缀”和“下一跳地址”组成，查找路由表时可能会得到不止一个匹配结果。应当从匹配结果中<strong>选择具有最长网络前缀的路由</strong>（地址块越小，路由越具体）。</p><ul><li><p>途径：通常<strong>将无分类编制路由表存放在</strong>一种<strong>层次数据结构</strong>中（二叉线索），自上而下查找。</p></li><li><p>采用CIDR编制，可以按照前缀的长短把前缀最长的放在第一行。只有检索到匹配的就停止检索。</p></li></ul><h2 id="子网划分方法：定长的子网掩码，变长的子网掩码"><a href="#子网划分方法：定长的子网掩码，变长的子网掩码" class="headerlink" title="子网划分方法：定长的子网掩码，变长的子网掩码"></a>子网划分方法：定长的子网掩码，变长的子网掩码</h2><h3 id="定长子网掩码"><a href="#定长子网掩码" class="headerlink" title="定长子网掩码"></a>定长子网掩码</h3><p><strong>概述：</strong></p><ol><li>各子网使用相同的子网掩码。 </li><li>各子网分配的IP地址数量相同（造成地址资源的浪费）</li></ol><p><strong>过程：</strong></p><ol><li>某单位拥有一个CIDR地址块208.115.21.0&#x2F;24  不难看出主机号占最后八位</li><li>划分子网。 有4个单位，则划分成4个子网。从主机号的高位借两位作为子网划分。</li><li>现在主机号还剩下6位。这样每个子网可分配的地址数为2^8-2</li></ol><h3 id="变长的网络掩码划分子网"><a href="#变长的网络掩码划分子网" class="headerlink" title="变长的网络掩码划分子网"></a>变长的网络掩码划分子网</h3><p>**概述：**每个子网可以使用不同的子网掩码。并且每个子网所分配的IP地址数量可以不同。</p><p><strong>过程：</strong></p><ol><li><p>某单位拥有一个CIDR地址块208.115.21.0&#x2F;24  不难看出主机号占最后八位。要划分给三个部门。</p></li><li><p>部门1的主机号需要6位，剩下26位作网络前缀。部门2需要5位，剩下27位作前缀。部门3的主机号需.位，剩余29位作前缀。</p></li><li><table><thead><tr><th>地址范围</th><th>划分方法</th></tr></thead><tbody><tr><td><u>208.115.21.00</u>000000 ~ <u>208.115.21.00</u>111111</td><td></td></tr><tr><td><u>208.115.21.010</u>00000 ~ <u>208.115.21.010</u>11111</td><td></td></tr><tr><td><u>208.115.21.01100</u>000 ~ <u>208.115.21.01100</u>111</td><td></td></tr><tr><td><u>208.115.21.010</u>00000 ~ <u>208.115.21.010</u>11111</td><td></td></tr></tbody></table></li><li><p>这种划分方案从大的开始划。部门1需要6位主机号，所以有2^6-2&#x3D;62个可分配地址，剩下2位用来划分子网，并且部门1为00.</p></li></ol><h2 id="网络层转发过程"><a href="#网络层转发过程" class="headerlink" title="网络层转发过程"></a>网络层转发过程</h2><p>**概述：**分组转发基于目的主机所在网络（压缩转发表大小），<strong>转发表信息 (目的网络地址，下一跳地址)</strong>，路由器根据IP地址的网络前缀来查表找到下一跳地址。</p><p><strong>两种特殊路由：</strong></p><ul><li><p>【特定主机路由】对特定目的主机的IP地址专门指明一个路由。</p><p>作用：方便管理员控制和测试网络</p></li><li><p>【默认路由】用特殊前缀0.0.0.0&#x2F;0表示默认路由。 当目的网络是其他网络(不是自身)也不在转发表中就一律选择默认路由</p><p>作用：通常用于路由器到互联网的路由（因为路由表不可能包含互联网上所有路由）</p></li></ul><p><strong>路由器分组转发算法：</strong></p><ol><li>从IP分组首部提取目的目的主机的IP地址</li><li>查找【特定主机路由】，找得到则按照这一项转发；找不到则开始按前缀长度顺序查找</li><li>对于查找中的一行，将【一行的子网掩码】与【目的地址】逐位【与】（AND），如果与结果和这一行的前缀匹配，结束查找。按下一跳转发。否则继续找下一行。</li><li>如果有一个【默认路由】，就传递给默认路由，没有，则【转发分组出错】。</li></ol><p><strong>注意：</strong></p><ul><li>因为转发表只给出下一跳地址，并非完整路径，所以传到一个路由器都要查一次它的转发表</li><li><strong>！！ 得到下一跳IP地址后，将它通过ARP转换成MAC地址然后填到MAC帧首部，再根据这个MAC地址去找到下一跳的路由器</strong></li></ul><h2 id="IP地址与硬件地址"><a href="#IP地址与硬件地址" class="headerlink" title="IP地址与硬件地址"></a>IP地址与硬件地址</h2><p><strong>各种地址</strong>：</p><table><thead><tr><th>IP地址</th><th>MAC地址（硬件地址）</th></tr></thead><tbody><tr><td>网络层及之上使用的地址，是分层式的。位于IP数据报首部。IP数据报封装成MAC帧之后，数据链路层是看不见IP地址的。</td><td>在数据链路层使用，平面式的。位于MAC帧首部。</td></tr></tbody></table><p>**网络层寻址：**网络层只使用IP地址来寻址（因为路由器的隔离，无法通过广播MAC地址来跨网络寻址）。</p><p><strong>寻址过程：</strong></p><ol><li>寻址时，每个路由器依据它的路由表选择到<strong>目标网络需要转发到的下一跳</strong></li><li>IP数据报通过多次路由转发<strong>到达目标网络后</strong>改为在目标局域网中通过数据链路层的MAC地址以广播的方式寻址</li></ol><p><strong>性质：</strong></p><ol><li>在IP层抽象的互联网上只能看到IP数据报</li><li>IP数据报首部有源IP地址，但是路由器只使用目的IP地址来转发</li><li>局域网的链路层只能看到MAC帧，MAC帧中是封装的IP数据报。MAC帧首部的源地址和目的地址会不断地改变，因为IP数据报在每次转发过程中都会被拆解重新封装（路由器根据下一跳IP地址通过ARP转换成MAC地址填进MAC帧首部）</li><li>无法使用MAC地址跨网络通信。因为每次转发都要修改MAC地址，如上所述。</li><li>IP层抽象的互联网屏蔽了下层复杂的细节，在网络层上可以使用统一抽象的IP地址来研究不同主机的通信</li></ol><h2 id="ARP-地址解析协议"><a href="#ARP-地址解析协议" class="headerlink" title="ARP  地址解析协议"></a>ARP  地址解析协议</h2><p><strong>ARP概述：</strong></p><ol><li>一种方法，旨在完成IP地址到MAC地址的映射。如果目的主机和源主机不在同一个局域网上，要通过ARP找到本局域网的某个路由器硬件地址，发分组传给它，并由这个路由器把分组转发给下一个网络。</li><li>ARP工作在网络层（看得见IP地址）；NAT工作在传输层（看得见端口）.</li></ol><p><strong>ARP表：<strong>每个主机都有的一个ARP高速缓存，存放</strong>本局域网</strong>上各主机和路由器的IP地址到MAC地址的映射表</p><p>**原理：**A向本局域网主机B发送IP数据报：  （ARP请求分组：<code>广播发送</code>  ARP响应分组：<code>单播发送</code>）</p><ol><li>查ARP高速缓存，如果有B的IP地址，直接得到对应硬件地址，把它写入MAC帧，并发送给B</li><li>如果没有，通过使用目的MAC地址为FF-FF-FF-FF-FF-FF的帧封装和广播ARP请求分组。所有主机都会收到ARP请求。</li><li>B收到后向A发送ARP响应分组，在分组里告诉A它(B)的IP地址和MAC地址映射关系，这样A可以写入它的ARP缓存，从而发送MAC帧</li></ol><p><strong>补充：</strong></p><ul><li>ARP用来解决同一局域网主机&#x2F;路由器的IP地址和硬件地址映射问题。不在一个局域网，则通过ARP找到某个路由器的硬件地址，发给这个路由器，让它转给下一个网络。</li><li>IP地址到硬件地址的解析自动进行，用户并不知道。</li><li>主机或路由器和本网络另一个已知IP地址的主机或路由器进行通信时，ARP自动将IP地址解析成数据链路层需要的硬件地址</li></ul><h2 id="动态主机配置协议-DHCP"><a href="#动态主机配置协议-DHCP" class="headerlink" title="动态主机配置协议 DHCP"></a>动态主机配置协议 DHCP</h2><p><strong>DHCP概述：</strong></p><ol><li>用于给主机动态地分配IP地址。</li><li>提供即插即用的联网机制，允许一台计算机加入新的网络和自动获取IP地址</li><li>应用层协议（通过客户&#x2F;服务器模式工作），基于UDP</li></ol><p><strong>工作原理：</strong></p><ol><li>使用客户&#x2F;服务器模型</li><li>需要IP地址的主机启动时向【DHCP服务器】广播发送【发现报文】，从而成为【DHCP客户】；</li><li>所有主机都能收到这个广播报文，但是只有【DHCP服务器】可以回答。</li><li>【DHCP服务器】在自己的数据库里查找这台主机的配置信息，找得到返回，找不到则从服务器的IP地址池中取一个地址分配给这台计算机。</li><li>【提供报文】DHCP服务器的回答报文。</li></ol><p><strong>过程：</strong></p><ol><li>DHCP客户广播发现报文（源地址0.0.0.0，目的地址255.255.255.255）</li><li>服务器收到这个广播报文，广播【提供报文】，这里面包括给DHCP客户的IP地址，报文源地址为DHCP服务器地址，目的地址为255.255.255.255</li><li>DHCP客户收到提供报文，如果接受这个IP地址，就需要广播“DHCP请求”给DHCP服务器。源地址0.0.0.0，目的地址255.255.255.255（同1.）</li><li>DHCP服务器广播“DHCP确认”消息，把IP地址分配给这个客户。源地址目的地址同2.</li></ol><p><strong>注意点：</strong></p><ol><li>可以有多台DHCP服务器，可能有多个应答消息，但是DHCP客户只挑选其中一个（最先到达的）</li><li>DHCP分配给客户的IP地址是【临时的】，客户只能在【租用期】内使用，租用期由服务器决定，客户也可以在报文中提出租用期要求。</li><li>交互过程采用广播方式。采用UDP。</li></ol><h2 id="ICMP-网际控制报文协议"><a href="#ICMP-网际控制报文协议" class="headerlink" title="ICMP 网际控制报文协议"></a>ICMP 网际控制报文协议</h2><p><strong>ICMP概述：</strong></p><ol><li>目的：有效转发IP数据报，提高交付成功机会。 </li><li>允许主机或路由器报告差错和异常情况</li><li>虽然ICMP报文封装在IP数据报中发送，但ICMP是依然是网络层协议。</li><li>ICMP报文有两种：【ICMP差错报告报文】【ICMP询问报文】</li></ol><p><strong>ICMP差错报告报文及其五种类型</strong>：用于目标主机或到目标主机路径上的路由器。目的是向源主机报告差错和异常情况。</p><ol><li>终点不可达：路由器&#x2F;主机不能交付数据时向源主机发送</li><li>源点抑制：路由器&#x2F;主机因为【拥塞】而丢弃数据报。 源点抑制报文告诉源点应该降低数据报的发送速率。</li><li>时间超过：<ul><li>路由器收到生存时间TTL为0的数据报，除丢弃这个数据报外还需要向源点发送时间超过报文。</li><li>终点在<strong>预先规定的时间内不能</strong>收到<strong>一个数据报</strong>的<strong>全部数据报片</strong>时，就把已收到的数据报片全部丢弃，然后向源点发送时间超过报文。</li></ul></li><li>参数问题：收到的数据报首部有的字段的值不正确，则丢弃并发送参数问题报文</li><li>改变路由（重定向）：告诉主机下次应该把数据报发送给另外的路由器，可通过更好地路由</li></ol><p><strong>ICMP差错报告报文不应该发送：</strong></p><p>​情况一：对ICMP差错报告报文不再发送ICMP差错报告报文</p><p>​情况二：第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报文</p><p>​情况三：对于具有多播地址的数据报都不发送ICMP差错报告报文</p><p>​情况四：对于特殊地址的数据报也不发送</p><p><strong>ICMP询问报文的四种类型</strong>：</p><ol><li>回送请求和回答报文</li><li>时间戳请求和回答报文</li><li>地址掩码请求和回答报文</li><li>路由器询问和通告报文</li></ol><p><strong>ICMP常见应用：</strong></p><ol><li>分组网间探测PING：测试两台主机间的连通性。工作在应用层，直接使用网络层的ICMP。</li><li>Traceroute：跟踪分组经过的路由。 工作在网络层。</li></ol><h2 id="4-2-习题查漏补缺"><a href="#4-2-习题查漏补缺" class="headerlink" title="4.2  习题查漏补缺"></a>4.2  习题查漏补缺</h2><p>一、IPv4计算首部检验和</p><ol><li>先把IP数据报首部划分为许多16位字的序列，并把检验和字段置零。把所有16位字相加后，将得到的和的反码写入检验和字段。</li><li>接收方收到数据报后，将首部的所有16位字再使用反码算术运算相加一次。将得到的和取反码，即得出接收方检验和的计算结果。</li><li>若首部未发生任何变化，则此结果必为0</li></ol><p>二、多IP：如果一个主机有两个以上的IP地址，那么这些IP地址应当属于不同的网络。所以他们的网络号一定不同。</p><h1 id="4-3-IPv6（从根本上解决地址耗尽问题）"><a href="#4-3-IPv6（从根本上解决地址耗尽问题）" class="headerlink" title="4.3 IPv6（从根本上解决地址耗尽问题）"></a>4.3 IPv6（从根本上解决地址耗尽问题）</h1><h2 id="IPv6特点"><a href="#IPv6特点" class="headerlink" title="IPv6特点"></a>IPv6特点</h2><table><thead><tr><th>特点</th><th>描述</th></tr></thead><tbody><tr><td>更大地址空间</td><td>从IPv4的32位增大到128位。 地址空间是前者的2^96倍。</td></tr><tr><td>灵活首部</td><td>IPv6首部长度固定，40B。选项放在有效载荷中，选项灵活可变（IPv4选项固定，放在首部可变部分.<strong>IPv4<strong><strong>的首部长度是可变的，必须是</strong></strong>4B****的整数倍</strong>）</td></tr><tr><td>允许协议扩充</td><td>允许不断扩充功能。IPv4固定</td></tr><tr><td>支持即插即用</td><td>也即自动配置。无需使用DHCP（动态主机配置协议 ，DHCP服务器&amp;DHCP客户）</td></tr><tr><td>分片</td><td>只有源主机才能分片，是端到端的。 不允许类似IPv4传输路径中的路由分片。</td></tr><tr><td>增大了安全性</td><td>身份鉴别和保密功能是IPv6的扩展首部</td></tr><tr><td>兼容性</td><td>IPv6与IPv4不兼容，但是与所有其他互联网协议兼容(TCP UDP ICMP IGMP DNS)</td></tr><tr><td>无首部检验和</td><td>IPv6协议没有首部检验和,这意味着攻击者无法通过篡改数据包来伪造或篡改数据,这有助于提高网络的安全性。     这一措施也加快了路由器处理数据报的速度。链路层会丢弃检测出差错的帧，并且传输层也有相应的差错处理机制，所以网络层额差错检测可以精简掉。</td></tr></tbody></table><h2 id="IPv6地址类型"><a href="#IPv6地址类型" class="headerlink" title="IPv6地址类型"></a>IPv6地址类型</h2><ol><li>单播</li><li>多播</li><li>任播(新增)</li></ol><h2 id="过渡技术"><a href="#过渡技术" class="headerlink" title="过渡技术"></a>过渡技术</h2><ol><li>双协议栈</li><li>隧道技术</li></ol><h1 id="4-4-路由算法和协议"><a href="#4-4-路由算法和协议" class="headerlink" title="4.4 路由算法和协议"></a>4.4 路由算法和协议</h1><h2 id="路由算法分类"><a href="#路由算法分类" class="headerlink" title="路由算法分类"></a>路由算法分类</h2><table><thead><tr><th>类型</th><th>特点</th><th>示例</th></tr></thead><tbody><tr><td>静态</td><td>手工配置</td><td>-</td></tr><tr><td>动态</td><td>自动调整</td><td>RIP, OSPF, BGP</td></tr></tbody></table><h2 id="路由协议对比"><a href="#路由协议对比" class="headerlink" title="路由协议对比"></a>路由协议对比</h2><table><thead><tr><th>协议</th><th>类型</th><th>特点</th></tr></thead><tbody><tr><td>RIP</td><td>距离向量</td><td>跳数限制15</td></tr><tr><td>OSPF</td><td>链路状态</td><td>支持分层区域</td></tr><tr><td>BGP</td><td>路径向量</td><td>AS间路由</td></tr></tbody></table><h1 id="4-5-IP多播"><a href="#4-5-IP多播" class="headerlink" title="4.5 IP多播"></a>4.5 IP多播</h1><h2 id="多播地址"><a href="#多播地址" class="headerlink" title="多播地址"></a>多播地址</h2><ul><li>IPv4：D类地址(224.0.0.0~239.255.255.255)</li><li>IPv6：FF00::&#x2F;8</li></ul><h2 id="多播协议"><a href="#多播协议" class="headerlink" title="多播协议"></a>多播协议</h2><ol><li>IGMP：组成员管理</li><li>多播路由协议：构建多播树</li></ol><h1 id="4-6-移动IP"><a href="#4-6-移动IP" class="headerlink" title="4.6 移动IP"></a>4.6 移动IP</h1><h2 id="关键概念"><a href="#关键概念" class="headerlink" title="关键概念"></a>关键概念</h2><ul><li>家乡代理</li><li>外地代理</li><li>转交地址</li><li>三角路由问题</li></ul><h1 id="4-7-网络层设备"><a href="#4-7-网络层设备" class="headerlink" title="4.7 网络层设备"></a>4.7 网络层设备</h1><h2 id="路由器功能"><a href="#路由器功能" class="headerlink" title="路由器功能"></a>路由器功能</h2><ul><li>连接异构网络</li><li>分组转发</li><li>路由选择</li><li>分隔广播域</li></ul><h2 id="路由表vs转发表"><a href="#路由表vs转发表" class="headerlink" title="路由表vs转发表"></a>路由表vs转发表</h2><table><thead><tr><th></th><th>路由表</th><th>转发表</th></tr></thead><tbody><tr><td>用途</td><td>路由选择</td><td>分组转发</td></tr><tr><td>生成</td><td>路由算法</td><td>从路由表得出</td></tr><tr><td>实现</td><td>软件</td><td>软件&#x2F;硬件</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> 408 </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 计算机网络 </tag>
            
            <tag> 网络层 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浪迹天涯</title>
      <link href="/2024/07/29/0021/"/>
      <url>/2024/07/29/0021/</url>
      
        <content type="html"><![CDATA[<p>这一个月来的实习真是令人心力憔悴，渐而使我愈发地有了逃离感。每天面对着堆积如山的实习工作和学习任务，我仿佛被压在巨石下的蚂蚁，挣扎着寻找一丝透气的空间。</p><p>不得不承认中█████研究院确实是一个大佬云集的地方，这里齐聚着各式各样人才，只是茶余饭后片刻的随想便已是我无法企及的高度。只可惜，每个人都是忙忙碌碌的，却又充满了希望，唯独我。</p><p>我总是一遍又一遍的思考着自己究竟想要什么——我并不是一个逆来顺受、安于现状的人，我仿佛就不是industrial engineering专业的人，更不是一个称手的研究助理：这不是理想中的生活，我只想跳出当下的圈子。</p><p>实习+学习的双重任务压得我喘不过气。我开始怀疑自己的选择，开始质疑自己的能力，甚至开始害怕面对未来。是否真的有勇气面对失败，就此，<strong>浪迹天涯</strong>，无人理解。</p><blockquote><p>寂寞与孤独，是亘古不变的主题。</p></blockquote><p>我只是一个微不足道的存在，一个在这个世界上挣扎求生的普通人。才刚踏上心灵的摆渡之旅，希望小小浪花不至将我吹翻，也不至触及礁石、湮入大海。</p><p>倘若我真的就这样开始了流浪，我将不再被那些无形的枷锁束缚。我将放下那些曾经让我窒息的期望和责任，去追寻那些真正让我心动的事物。我会走过繁华的城市，也会穿越寂静的乡村；我会在星空下许下愿望，也会在暴风雨中寻找庇护。</p><p>但也许，我将一直孤独地行走，直到世界的尽头。那时，我或许会明白，真正的自由不是逃避，而是在面对生活的重压时，依然能够保持内心的平静和坚定。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 随笔 </tag>
            
            <tag> 感悟 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>寻书</title>
      <link href="/2024/07/08/2317/"/>
      <url>/2024/07/08/2317/</url>
      
        <content type="html"><![CDATA[<p>我记得我小时候</p><p>我姐当时在██读高中她的房间很多闲书   就是消遣时间用的</p><p>我当时翻看就着迷了  文字虽然写的平淡无聊  文笔也很一般  就地摊小说水平  但是对于一个小学生来说</p><p>那里面的见闻让人心旷神怡</p><p>一拨人坐着竹筏游山玩水  然后桥头还点着灯火</p><p>那个时候光污染应该还没那么严重</p><p>其实这段事情我可能不会再想起来了，因为就是太久了</p><p>直到我看到这么一段词</p><blockquote><p>照野弥弥浅浪，横空隐隐层霄。<br>障泥未解玉骢骄，我欲醉眠芳草。<br>可惜一溪风月，莫教踏碎琼瑶。<br>解鞍欹枕绿杨桥，杜宇一声春晓。——《西江月·顷在黄州》</p></blockquote><p>它的序也写得特别好</p><blockquote><p>“及觉已晓，乱山攒拥，流水锵然，疑非尘世也。”</p></blockquote><p>我觉得这简直就是闲书中写的那个桂林</p><blockquote><p>乱山攒拥，流水锵然</p></blockquote><p>还有就是之前看词的时候，有一段写的是</p><blockquote><p>“帐底吹笙香吐麝，更无一点尘随马”</p></blockquote><p>这是刚刚下过雨，然后空气很湿润<br>马车跑过去没有一点灰尘</p><p><em>回复【当时下完雨还很凉快】  差不多就这种感觉</em></p><p>现在华北这边太██热了</p><p>那本小说里面写的就是  几个人就这样漂流远去</p><p>我原本觉得看这种书很俗的</p><p>但是里面那些内容，直到现在也是引人入胜的，就每个看过的人也会想去</p><p>不知道现在那边是不是两岸全是那种光污染</p><p>那本小说很久以前得了，估计也是一零年左右写的</p><p>现在去应该难找到同一种感觉</p><p>其实，我更希望自然人文景点还是能保持最初的样子</p><p>现在的茶峒也不是以前那个茶峒了</p><p>我记得他们那个时候还是傍晚，两岸还有那种灯火，竹筏开出去，离岸边远了，四处慢慢暗下来，直到伸手不见五指</p><p>然后他们就互相问对方怕不怕</p><p>……</p><p>甲辰年辛未月于北京</p>]]></content>
      
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 随笔 </tag>
            
            <tag> 回忆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>半年志</title>
      <link href="/2024/06/25/2338/"/>
      <url>/2024/06/25/2338/</url>
      
        <content type="html"><![CDATA[<p>时间过得真快啊！还来不及为春节题文，一眨眼已是年中了。</p><blockquote><p><em>这一学期所学的课程，…</em></p></blockquote><p> 能够掌握专业知识和技能，必然是极好的。只是，在我愈发的深入了解██这个专业后，我逐渐产生了逃离感，愈发地向自己发问：这真的是我想要的生活吗？又或许从高考填志愿就已经注定了。我在大二的时候有过转专业的想法，但最终还是为了一年的沉没成本想着暂且读下去。这份遗憾自高考录取起，雪藏了三年，兜兜转转又回到了原点。直至癸卯年腊月的某一个下午，初见██的那怦然心动的一刻，我心里大抵也有了想法——████。但囿于21级各大改革的阵痛，这一个学期的复习并不顺利。毕竟要学许许多多新的东西。眼下繁多的课程及学校布置的任务，以及突然延长的强制生产实习，留给我复习的时间已经不多了。</p><p> 最后，回顾整个学期。2024年悄然过半，又到了写半年志的时候。真正地提起了笔，静待思绪涌现，沉默良久后又作罢。依旧是兵荒马乱的半年，曾几何时，我耗费了太多的时间在一些或有意义或无意义的事情上。悟已往之不谏，知来者之可追。既然选择了这条路，就应当坚定走下去，何必欸奈路途艰难。希望馀下的这半年岁月里我们都能成长成为更好的人，“縱浪大化裡，不喜亦不懼”。</p><p>甲辰年庚午月于北京</p>]]></content>
      
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 随笔 </tag>
            
            <tag> 感悟 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024年美赛</title>
      <link href="/2024/02/07/2150/"/>
      <url>/2024/02/07/2150/</url>
      
        <content type="html"><![CDATA[<blockquote><p>这几日一直为之心力憔悴，开个贴记录一下。下面是论文部分内容。</p></blockquote><h1 id="Too-close-to-call-The-Impact-of-Momentum-Changes-in-Tennis"><a href="#Too-close-to-call-The-Impact-of-Momentum-Changes-in-Tennis" class="headerlink" title="Too close to call? The Impact of Momentum Changes in Tennis"></a>Too close to call? The Impact of Momentum Changes in Tennis</h1><ul><li><strong>Problem Chosen</strong>: C</li><li><strong>2024 MCM&#x2F;ICM Summary Sheet</strong></li><li><strong>Team Control Number</strong>: 2430080</li></ul><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>In an intense tennis match, even a world-renowned and experienced veteran may fail to grasp a momentary reversal and lose. Therefore, identifying factors affecting match points and situation changes, and verifying the potential impact of momentum, is crucial for athletes to better manage matches and refine their strategies. This paper addresses this by constructing models to quantify player performance and momentum, and to analyze how various factors influence game situations.</p><p>Before modeling, we preprocess the annexed Wimbledon match data, identifying and normalizing relevant factors for subsequent quantification.</p><p>For Problem 1, as an initial step, we identify performance-related factors, build a corresponding model, and visualize athlete performance throughout the game. We test several classification models, selecting the best one based on accuracy, recall, precision, and other metrics, followed by performance visualization.</p><p>Problem 2 primarily quantifies “momentum,” transforming it from a theoretical concept into a practical index. We compare this index with previous game results to determine if “momentum” is random. The entropy weight method is used to determine the weight of each variable affecting momentum, followed by Spearman correlation analysis to assess momentum’s influence on the game. Additionally, S-W and K-S tests are performed on the index to determine if game swings and successes are random. The fact that selected variables do not satisfy random distribution further supports a non-random, albeit weak ($0.334$ correlation), influence of “momentum” on game outcomes, refuting the coach’s skepticism.</p><p>For Problem 3, the focus is on modeling game fluctuation. Building on the previous two problems, logistic regression is used to identify performance function conversion points, pinpointing key moments of situation change. The KNN method and BP neural network provide supporting evidence. The model’s effectiveness is cross-verified using multi-set match data. The most relevant factors are determined using combined metrics from the first two problems, and a correlation heatmap is presented. Recommendations derived from these metrics aim to provide insights into player momentum changes in different match situations and support future strategic planning.</p><p>For Problem 4, the logistic regression model generally predicts game fluctuation well. We explore the model’s generalization and limitations from a variable selection perspective, considering metrics overlooked in other models, and propose potential improvements. For instance, enhancing generalization could make the model effective across different competitive sports, aiding athletes’ long-term preparation and physical health.</p><p><strong>Keywords</strong>: Machine Learning, Momentum, Correlation Analysis, Entropy Weighting Method, Logistic Regression</p><hr><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 Introduction</h2><h3 id="1-1-Background"><a href="#1-1-Background" class="headerlink" title="1.1 Background"></a>1.1 Background</h3><p>Tennis, a sport demanding endurance, speed, and comprehensive athletic ability, has a rich history. Elite players like Roger Federer and Rafael Nadal combine quick reflexes and explosive power with stamina and stability. Explosiveness and quick reflexes ensure optimal positioning and decision-making for every shot. Endurance and muscle stability enable sustained high-intensity play while reducing injury risk. As a new generation of high-level players emerges and older champions age, there’s growing interest in whether “momentum” influences game trends, potentially mitigating physical decline or enabling tactical development to defeat opponents. Our team addresses this by processing known data, characterizing and correlating indicators, applying principal component analysis where suitable, and using machine learning to build models and draw conclusions. We use data from the initial games of the provided dataset, focusing on indicators such as serve, receive, score, and unforced errors.</p><h3 id="1-2-Restatement-of-the-Problem"><a href="#1-2-Restatement-of-the-Problem" class="headerlink" title="1.2 Restatement of the Problem"></a>1.2 Restatement of the Problem</h3><p>Currently, the existence, quantification, and impact of an abstract indicator like “momentum” remain unclear, particularly how various game events create or change it. This article aims to optimize understanding by addressing the following problems:</p><ol><li>Analyze the game’s flow to determine when and to what extent a player performs better, establish evaluation criteria, and plot the player’s score curve.</li><li>Assess whether the model obtained is random or demonstrates a significant relationship with “momentum,” thereby addressing coach skepticism.</li><li>Identify moments when game momentum shifts between players and provide advice based on these insights.</li><li>Evaluate the model’s applicability and limitations.</li></ol><h2 id="2-Overview-of-basic-definitions"><a href="#2-Overview-of-basic-definitions" class="headerlink" title="2 Overview of basic definitions"></a>2 Overview of basic definitions</h2><h3 id="2-1-Rules-of-Tennis"><a href="#2-1-Rules-of-Tennis" class="headerlink" title="2.1 Rules of Tennis"></a>2.1 Rules of Tennis</h3><p>Tennis rules are complex, especially Grand Slam men’s singles scoring. A match is best-of-five sets. A set typically involves winning 6 games, but requires a two-game lead (e.g., 7-5 or tie-break at 6-6). In a game, a player needs four points to win, also with a two-point lead. Point scores are:</p><ol><li>0 points &#x3D; love</li><li>1 point &#x3D; 15</li><li>2 points &#x3D; 30</li><li>3 points &#x3D; 40</li></ol><p>At $40-40$ (“Deuce”), a player must win two consecutive points to secure the game. Winning the first point gives “AD-in,” and winning the next wins the game. Losing the point returns the score to $40-40$.</p><p>Serve is critical and requires separate analysis. Players alternate serving each game, with two service attempts per point. Failing to land the ball in the service area on both attempts results in a “double fault,” costing the server the point.</p><h3 id="2-2-the-“Momentum”-theory"><a href="#2-2-the-“Momentum”-theory" class="headerlink" title="2.2 the “Momentum” theory"></a>2.2 the “Momentum” theory</h3><p>The “momentum” theory posits that in sports, gaining an advantage often leads to sustained success. This momentum can boost an athlete’s or team’s confidence and may also affect the opponent’s mental state.</p><p>In tennis, an athlete who gains an advantage often maintains it, exerting psychological pressure on the opponent. This psychological edge can simultaneously motivate the advantaged player, leading to positive outcomes.</p><p>Beyond psychological factors like self-confidence and opponent pressure, “momentum” can also be generated through strategic game management, such such as physical energy conservation or adapting to an opponent’s playing style.</p><h3 id="2-3-Model-Overview"><a href="#2-3-Model-Overview" class="headerlink" title="2.3 Model Overview"></a>2.3 Model Overview</h3><p>The overall architecture of our model involves a three-fold task: constructing a model to quantify player performance at any given moment; modeling momentum and investigating its role in game swings and success; and applying the proposed model to a given match to test its performance.</p><p>Our methodology proceeds as follows: First, we preprocess the dataset and select&#x2F;construct $14$ variables for modeling. Among several methods, the XGBoost classification model was chosen for its superior predictive performance. The trained model predicts whether a player will perform well or poorly at a given moment based on these $14$ variables. Second, to analyze momentum’s potential impact on game trends, we select six key variables to construct the momentum function. We use the entropy weighting method to determine variable weights by calculating their influence on game scores. Additionally, S-W and K-S tests are performed on these indicators to determine if game swings and successes are random. Third, building on the first two steps, logistic regression is used to identify critical thresholds in the performance function. This helps pinpoint specific moments of situation shifts, which, combined with player momentum changes, determine the dominant side. Finally, the constructed model undergoes comprehensive analysis, validation, and evaluation.</p><h3 id="2-4-Research-Significance"><a href="#2-4-Research-Significance" class="headerlink" title="2.4 Research Significance"></a>2.4 Research Significance</h3><p>By establishing relevant models, this paper investigates the mechanisms behind phenomena in tennis matches, such as unexpected comebacks despite significant disadvantages. We identify and quantify momentum as an indicator, analyzing key nodes of rhythm reversal. This understanding can help tennis players and coaches adjust their states and strategies in rapidly changing matches, leveraging momentum to overcome opponents even when technical conditions are similar.</p><h2 id="3-Model-hypothesis-and-symbol-description"><a href="#3-Model-hypothesis-and-symbol-description" class="headerlink" title="3 Model hypothesis and symbol description"></a>3 Model hypothesis and symbol description</h2><h3 id="3-1-Basic-assumptions-of-the-model"><a href="#3-1-Basic-assumptions-of-the-model" class="headerlink" title="3.1 Basic assumptions of the model"></a>3.1 Basic assumptions of the model</h3><ol><li>A player’s performance level (skill) is assumed to be constant, unaffected by factors like fatigue, injury, off-field conditions, or natural elements. This provides a fundamental basis for data analysis.</li><li>All on-field player data are considered accurate, true, and reflective of the actual game situation at that moment.</li><li>Players are assumed to always exert maximum effort to win, with no influence from factors like physical strength conservation or betting.</li><li>A player’s momentum is determined solely by their momentum at the previous moment and the change in momentum at the current moment. The opponent’s impact is expressed directly through this current momentum change and is not analyzed as an independent indicator.</li></ol><h2 id="4-Notations"><a href="#4-Notations" class="headerlink" title="4 Notations"></a>4 Notations</h2><p>The data are examined in each set, utilizing both absolute and relative evaluation indices.</p><table><thead><tr><th align="left">Symbols</th><th align="left">Descriptions &#x2F; Evaluation index</th></tr></thead><tbody><tr><td align="left">X1</td><td align="left">p1-games</td></tr><tr><td align="left">X2</td><td align="left">Number of score leads in the current set</td></tr><tr><td align="left">X3</td><td align="left">serve-no</td></tr><tr><td align="left">X4</td><td align="left">p1-points-won</td></tr><tr><td align="left">X5</td><td align="left">server</td></tr><tr><td align="left">X6</td><td align="left">p1-winner</td></tr><tr><td align="left">X7</td><td align="left">Current set Number of points scored on non-touch forehand shots</td></tr><tr><td align="left">X8</td><td align="left">Current set Number of points scored on no touch backhand shots</td></tr><tr><td align="left">X9</td><td align="left">p1-double-fault</td></tr><tr><td align="left">X(10)</td><td align="left">p1-net-pt-won</td></tr><tr><td align="left">X(11)</td><td align="left">p1-net-pt</td></tr><tr><td align="left">X(12)</td><td align="left">They serve, they score</td></tr><tr><td align="left">X(13)</td><td align="left">p1-distance-run</td></tr><tr><td align="left">X(14)</td><td align="left">p1-unf-err</td></tr><tr><td align="left">X(15)</td><td align="left">Whether the current point is ahead of the opponent</td></tr><tr><td align="left">$\beta$</td><td align="left">The weight of the momentum function indicator</td></tr><tr><td align="left">$q$</td><td align="left">The influence of an indicator on the score</td></tr><tr><td align="left">$\alpha$</td><td align="left">The weight effect of the momentum of the previous moment on the momentum of this moment</td></tr><tr><td align="left">$M_t$</td><td align="left">The amount of change in momentum at the current moment</td></tr><tr><td align="left">$I_t$</td><td align="left">Momentum function</td></tr></tbody></table><h2 id="5-Task-1-Model-Establishment-and-Solution"><a href="#5-Task-1-Model-Establishment-and-Solution" class="headerlink" title="5 Task 1 Model Establishment and Solution"></a>5 Task 1 Model Establishment and Solution</h2><h3 id="5-1-Problem-Analysis"><a href="#5-1-Problem-Analysis" class="headerlink" title="5.1 Problem Analysis"></a>5.1 Problem Analysis</h3><p>Problem 1 requires developing a model to measure and evaluate a player’s performance against an opponent based on in-game actions and results. The player’s game flow should then be visualized.</p><p>Using the provided data (‘data_dictionary.csv’, ‘Wimbledon_featured_matches.csv’), we plan to select variables that reflect player performance, define an objective function, and employ machine learning for model development. The model’s effectiveness will then be tested and evaluated.</p><h3 id="5-2-Model-Establishment"><a href="#5-2-Model-Establishment" class="headerlink" title="5.2 Model Establishment"></a>5.2 Model Establishment</h3><h4 id="5-2-1-Data-preprocessing"><a href="#5-2-1-Data-preprocessing" class="headerlink" title="5.2.1 Data preprocessing"></a>5.2.1 Data preprocessing</h4><p>After determining independent and dependent variables, we preprocess the existing data. This involves identifying and transforming anomalous data, such as null values (“NA”) and string representations of numerical values, to ensure data quality and model accuracy. Subsequently, the variable data is extracted, and the resulting dataset is standardized.</p><h4 id="5-2-2-Model-Preparation"><a href="#5-2-2-Model-Preparation" class="headerlink" title="5.2.2 Model Preparation"></a>5.2.2 Model Preparation</h4><p>Independent variables from $X_1$ to $X_{15}$ are selected. The dependent variable is a binary label: $1$ represents a score, and $0$ represents no score. To achieve optimal performance, classification models are employed for fitting and training. Commonly used classification models include LGBM, SVC, MLP, Logistic Regression, and XGBoost. We specifically selected Decision Trees, Random Forest, KNN, BPNN, SVC, and XGBoost. The data was partitioned, with $6176$ records for training and $1108$ for prediction. The results are summarized below:</p><p><strong>Table 1: Performance Comparison of Different Models</strong></p><table><thead><tr><th align="left">Model</th><th align="left">Dataset</th><th align="left">Accuracy</th><th align="left">Recall</th><th align="left">Precision</th><th align="left">F1 Score</th></tr></thead><tbody><tr><td align="left">Decision Trees</td><td align="left">Training Set</td><td align="left">0.834</td><td align="left">0.834</td><td align="left">0.835</td><td align="left">0.834</td></tr><tr><td align="left"></td><td align="left">Test Set</td><td align="left">0.756</td><td align="left">0.756</td><td align="left">0.758</td><td align="left">0.756</td></tr><tr><td align="left">Random Forest</td><td align="left">Training Set</td><td align="left">0.83</td><td align="left">0.83</td><td align="left">0.83</td><td align="left">0.829</td></tr><tr><td align="left"></td><td align="left">Test Set</td><td align="left">0.765</td><td align="left">0.765</td><td align="left">0.766</td><td align="left">0.765</td></tr><tr><td align="left">KNN</td><td align="left">Training Set</td><td align="left">0.848</td><td align="left">0.848</td><td align="left">0.848</td><td align="left">0.848</td></tr><tr><td align="left"></td><td align="left">Test Set</td><td align="left">0.745</td><td align="left">0.745</td><td align="left">0.745</td><td align="left">0.745</td></tr><tr><td align="left">BPNN</td><td align="left">Training Set</td><td align="left">0.8</td><td align="left">0.8</td><td align="left">0.805</td><td align="left">0.799</td></tr><tr><td align="left"></td><td align="left">Test Set</td><td align="left">0.757</td><td align="left">0.757</td><td align="left">0.762</td><td align="left">0.757</td></tr><tr><td align="left">SVC</td><td align="left">Training Set</td><td align="left">0.653</td><td align="left">0.653</td><td align="left">0.794</td><td align="left">0.603</td></tr><tr><td align="left"></td><td align="left">Test Set</td><td align="left">0.631</td><td align="left">0.631</td><td align="left">0.785</td><td align="left">0.565</td></tr><tr><td align="left">XGBoost</td><td align="left">Training Set</td><td align="left">0.925</td><td align="left">0.925</td><td align="left">0.925</td><td align="left">0.925</td></tr><tr><td align="left"></td><td align="left">Test Set</td><td align="left">0.767</td><td align="left">0.767</td><td align="left">0.769</td><td align="left">0.766</td></tr></tbody></table><h4 id="5-2-3-Model-Test"><a href="#5-2-3-Model-Test" class="headerlink" title="5.2.3 Model Test"></a>5.2.3 Model Test</h4><p>Based on Section 2.2, we generated the ROC curve for the XGBoost model. The ROC curve, which plots sensitivity against specificity, serves as a comprehensive metric for continuous variables; a larger Area Under the Curve (AUC) signifies higher diagnostic accuracy. The point on the ROC curve closest to the upper-left corner indicates the optimal critical value for achieving both high sensitivity and specificity.</p><p>The evaluation criteria for AUC values in model performance are:</p><ol><li>$AUC &#x3D; 1$: A perfect classifier, implying at least one threshold yields perfect prediction. Such classifiers are rare in practice.</li><li>$0.5 &lt; AUC &lt; 1$: Better than a random guess. The classifier has predictive value if the threshold is set appropriately.</li><li>$AUC &#x3D; 0.5$: Equivalent to random guessing (e.g., a coin toss), indicating no predictive value.</li><li>$AUC &lt; 0.5$: Worse than random guessing. However, if predictions are consistently inverse, it can still be leveraged to perform better than random.</li></ol><p>The AUC of $0.97$ demonstrates a strong classification prediction effect. When tested with the final $1108$ data points from the standardized dataset, the XGBoost model maintained high prediction accuracy, consistently around $76%$. The ROC curve further validates the model’s classification prediction capability.</p><p><strong>Table 2: XGBoost Model Performance</strong></p><table><thead><tr><th align="left">Dataset</th><th align="left">Accuracy</th><th align="left">Recall</th><th align="left">Precision</th><th align="left">F1 Score</th></tr></thead><tbody><tr><td align="left">Training Set</td><td align="left">0.925</td><td align="left">0.925</td><td align="left">0.925</td><td align="left">0.925</td></tr><tr><td align="left">Test Set</td><td align="left">0.767</td><td align="left">0.767</td><td align="left">0.769</td><td align="left">0.766</td></tr></tbody></table><h4 id="5-2-4-Display-of-Model-Prediction-Effect"><a href="#5-2-4-Display-of-Model-Prediction-Effect" class="headerlink" title="5.2.4 Display of Model Prediction Effect"></a>5.2.4 Display of Model Prediction Effect</h4><p>Following model testing, we confirmed the XGBoost model’s reliability for this competition and proceeded to visualize player data from two matches. To account for varying time intervals between points and to achieve a smoother representation of player performance, we used cubic spline interpolation to interpolate the output and normalize the final results. Additionally, player service status (independent variable $X_5$, where $0$ means no and $1$ means yes) was integrated into the model. The figures display both uninterpolated (light lines) and interpolated (dark lines) predicted values, with Player 1 as the main observation focus.</p><h2 id="6-Task-2-Model-Establishment-and-Solution"><a href="#6-Task-2-Model-Establishment-and-Solution" class="headerlink" title="6 Task 2 Model Establishment and Solution"></a>6 Task 2 Model Establishment and Solution</h2><h3 id="6-1-Solution-to-Problem-2"><a href="#6-1-Solution-to-Problem-2" class="headerlink" title="6.1 Solution to Problem 2"></a>6.1 Solution to Problem 2</h3><p>Given the coach’s skepticism regarding “momentum,” we quantify this indicator and analyze its correlation with the performance function predicted in Problem 1 through visual data. By calculating the correlation between “momentum” and the final game outcome on the test set, we aim to demonstrate a significant relationship, thereby refuting the coach’s view.</p><h3 id="6-2-Problem-2-Model-Establishment-and-Solution"><a href="#6-2-Problem-2-Model-Establishment-and-Solution" class="headerlink" title="6.2 Problem 2 Model Establishment and Solution"></a>6.2 Problem 2 Model Establishment and Solution</h3><p>To precisely quantify “momentum,” we define it as a function of previous momentum and the current momentum change, which in turn is derived from specific variables. We identify indicators likely to influence player mentality and morale. The momentum function can be expressed as:</p><p>$$ M_t &#x3D; \sum_{i&#x3D;1}^m \beta_i q_i x_i $$<br>where $X \in {X_{7}, X_{8}, X_{9}, X_{10}, X_{15}, X_{16}}$.</p><p>Here, $\beta$ represents the weight of each indicator in momentum, and $q$ signifies the impact of changes in that variable on the game. The entropy weight method is used to determine $\beta$ and $q$. This involves analyzing overall game data, identifying score changes within specific game sections, and counting indicator occurrences to calculate $q$.</p><h4 id="6-2-1-Entropy-weight-method"><a href="#6-2-1-Entropy-weight-method" class="headerlink" title="6.2.1 Entropy weight method"></a>6.2.1 Entropy weight method</h4><p>The entropy weight method, a multi-attribute decision analysis technique, determines attribute influence weights on the final result based on information entropy. It calculates the importance of each attribute by assessing its entropy.</p><p>The principle of the entropy weight method is as follows: Information entropy measures an indicator’s dispersion. Greater dispersion leads to a smaller information entropy value and a larger influence (weight) on the comprehensive evaluation. Conversely, if an indicator’s values are uniform, it holds no role in the comprehensive evaluation. Therefore, information entropy provides an objective basis for calculating index weights in multi-indicator evaluations.</p><p>This method determines weights directly from the data, ensuring strong objectivity and minimizing subjective influence on decision results. Its calculation logic is simple and clear, making it effective and easy to implement.</p><p>For analysis, we selected six indicators: $X_7$ (points scored on non-touch forehand shots in the current set), $X_8$ (points scored on non-touch backhand shots in the current set), $X_9$ (whether the second serve is a double fault), $X_{10}$ (net points won), $X_{15}$ (unforced errors), and $X_{16}$ (whether the current point is ahead of the opponent). We believe these indicators, encompassing both positive and negative influences, significantly impact momentum.</p><p>The specific calculation steps are: First, we construct the index system and determine the index matrix, where each column is an indicator and each row represents an individual’s value across different indicators. With six indicators and six individuals, the matrix is then standardized—a step already completed during data preprocessing. Finally, the entropy ($H_j$) for each index is calculated using the following formulas:</p><p>$$ P_{ij} &#x3D; \frac{Z_{ij}}{\sum_{i&#x3D;1}^m Z_{ij}} $$<br>$$ H_j &#x3D; -\frac{\sum_{i&#x3D;1}^m P_{ij} \ln(P_{ij})}{\ln m} $$</p><p>Finally, the entropy weight ($w_j$) is calculated using the entropy value: $w_j &#x3D; \frac{1-H_j}{n-\sum_{j&#x3D;1}^n H_j}$. The final values obtained for each weight are $26.274, 33.962, 0.176, 26.896, 1.406, 11.287$. These results are then substituted into the momentum function expression.</p><h4 id="6-2-2-Calculate-the-impact-of-each-indicator-on-the-match-during-the-match"><a href="#6-2-2-Calculate-the-impact-of-each-indicator-on-the-match-during-the-match" class="headerlink" title="6.2.2 Calculate the impact of each indicator on the match during the match"></a>6.2.2 Calculate the impact of each indicator on the match during the match</h4><p>This step aims to determine $q$. The primary operation involves selecting a dataset and calculating the average impact of score changes compared to the operation of that step. For example, if a score changes by $5$ points and occurs $5$ times, the corresponding $q$ value is calculated as the average value: $579&#x2F;577 &#x3D; 1$, $273&#x2F;273 &#x3D; 1$, $-122&#x2F;122 &#x3D; 1$, $545&#x2F;545 &#x3D; 1$, $-920&#x2F;920 &#x3D; -1$, $-152&#x2F;2462 &#x3D; -0.0617$. Based on $\beta$ and $q$, the current momentum change ($M_t$) can be calculated.</p><h3 id="6-3-Find-the-final-momentum-function"><a href="#6-3-Find-the-final-momentum-function" class="headerlink" title="6.3 Find the final momentum function"></a>6.3 Find the final momentum function</h3><p>The model is defined as:<br>$$ \text{Model} :&#x3D; \alpha + I_t I_{(t-1)} M_t $$<br>Here, $\alpha$ represents the correlation between the momentum of the previous time period and the momentum of the later time period. Each score moment is treated as a unit, and momentum changes approximate the relationship between momentum functions. The result of the above expression is approximately $0.1$, suggesting $\alpha \approx 0.1$. Substituting this value allows derivation of the momentum function.</p><p>The visualization demonstrates a clear positive correlation between the momentum function and the performance function during certain stages of representation.</p><h3 id="6-4-Result-analysis-of-question-2"><a href="#6-4-Result-analysis-of-question-2" class="headerlink" title="6.4 Result analysis of question 2"></a>6.4 Result analysis of question 2</h3><p>A Pearson correlation test was conducted between the momentum function and the predicted performance value from Problem 1 to assess momentum’s influence on the game.</p><p><strong>Table 3: Correlation Analysis between Performance and Momentum</strong></p><table><thead><tr><th align="left"></th><th align="left">Performance</th><th align="left">Momentum</th></tr></thead><tbody><tr><td align="left">Performance</td><td align="left">1 ($0.000^{***}$)</td><td align="left">($0.000 \times 0.336^{**}$)</td></tr><tr><td align="left">Momentum</td><td align="left">($0.000 \times 0.336^{**}$)</td><td align="left">1 ($0.000^{***}$)</td></tr></tbody></table><p>The Pearson correlation coefficient is $0.335$, indicating a weak correlation between the momentum function and the original performance function. This suggests that while momentum has a certain influence on the game result, it is not random, contrary to the coach’s assertion.</p><h4 id="6-4-1-Normalty-Test"><a href="#6-4-1-Normalty-Test" class="headerlink" title="6.4.1 Normalty Test"></a>6.4.1 Normalty Test</h4><p>To further validate that “momentum” influences game outcomes and to refute the coach’s skepticism, we performed normality tests.</p><p>Given that the momentum function is composed of selected indicators, its random distribution can be approximated as normal.</p><p>Normality testing, primarily conducted using the S-W and K-S tests, assesses whether selected independent variables conform to a normal distribution by analyzing their statistical significance. If the significance ($p &lt; 0.05$), the variable does not meet the normal distribution assumption.</p><p>Taking $X_7$ as an example, with a sample size $N \ge 5000$, the K-S test yielded a significance $p$-value of $0.000^{***}$. This significant result rejects the null hypothesis, indicating that the data for $X_7$ does not follow a normal distribution. Further analysis confirms this, as its kurtosis ($7.673$) is less than $10$ and its skewness ($3.11$) is greater than $3$, consistent with deviations from normality.</p><p>Since other indicators also failed the normality test, this collective evidence refutes the coach’s assertion that “momentum” is random, strongly suggesting that “momentum” indeed impacts the game.</p><h2 id="7-Task-3-Model-Establishment-and-Solution"><a href="#7-Task-3-Model-Establishment-and-Solution" class="headerlink" title="7 Task 3 Model Establishment and Solution"></a>7 Task 3 Model Establishment and Solution</h2><h3 id="7-1-Solution-to-Problem-3"><a href="#7-1-Solution-to-Problem-3" class="headerlink" title="7.1 Solution to Problem 3"></a>7.1 Solution to Problem 3</h3><p>Building on the conclusions from the first two problems, Problem 3 approaches game dynamics from two angles. First, by using the performance function from Problem 1, we identify specific moments of situation change, reflecting the actual competition. Second, from the perspective of momentum, a positive increase in the momentum change of the two players indicates an advantage for Player 1 during that period, and vice versa. Thus, the model can effectively identify these shifts in the game’s flow.</p><h3 id="7-2-Modeling-and-solution-of-problem-3"><a href="#7-2-Modeling-and-solution-of-problem-3" class="headerlink" title="7.2 Modeling and solution of problem 3"></a>7.2 Modeling and solution of problem 3</h3><p>To address this problem, we develop the model using two distinct approaches: first, predicting situation changes through logical analysis; second, analyzing game fluctuations by combining performance and momentum functions from the first two problems to assess game flow.</p><h4 id="7-2-1-Logistic-regression"><a href="#7-2-1-Logistic-regression" class="headerlink" title="7.2.1 Logistic regression"></a>7.2.1 Logistic regression</h4><p>Logistic regression, a generalized linear regression model, differs from linear regression mainly in its dependent variable type; it is suited for binomial distributions, making it primarily a classification method for two-category problems. The process involves establishing a cost function for regression or classification, iteratively solving for optimal model parameters, and then validating the model’s quality. Logistic regression excels at fitting certain linear relationships, offers fast computation, strong noise immunity, and robustness against outliers.</p><p>For our normalized data, we apply logistic regression to determine the median of the performance function. Values above this median indicate Player 1’s advantage, and vice versa. Variables $X_1$ to $X_{14}$ are used as logistic regression inputs, with the momentum increment at each time point as the dependent variable. If this increment is greater than $0$ (occurring in approximately $47%$ of instances), Player 1 holds the advantage. $80%$ of the data is used for training.</p><p><strong>Table 5: Logistic Regression Model Performance on Training and Test Sets</strong></p><table><thead><tr><th align="left">Dataset</th><th align="left">Accuracy Rate</th><th align="left">Recall Rate</th><th align="left">Precision Rate</th><th align="left">F1 Score</th></tr></thead><tbody><tr><td align="left">Training Set</td><td align="left">0.746</td><td align="left">0.746</td><td align="left">0.743</td><td align="left">0.739</td></tr><tr><td align="left">Test Set</td><td align="left">0.708</td><td align="left">0.708</td><td align="left">0.785</td><td align="left">0.679</td></tr></tbody></table><p>To verify the model’s accuracy, we also employed KNN classification and BP neural networks, which yielded the following respective conclusions:</p><p><strong>Table 6: KNN Model Performance on Training and Test Sets</strong></p><table><thead><tr><th align="left">Dataset</th><th align="left">Accuracy Rate</th><th align="left">Recall Rate</th><th align="left">Precision Rate</th><th align="left">F1 Score</th></tr></thead><tbody><tr><td align="left">Training Set</td><td align="left">0.877</td><td align="left">0.877</td><td align="left">0.876</td><td align="left">0.876</td></tr><tr><td align="left">Test Set</td><td align="left">0.694</td><td align="left">0.694</td><td align="left">0.706</td><td align="left">0.685</td></tr></tbody></table><p><strong>Table 7: BP-NN Model Performance on Training and Test Sets</strong></p><table><thead><tr><th align="left">Dataset</th><th align="left">Accuracy Rate</th><th align="left">Recall Rate</th><th align="left">Precision Rate</th><th align="left">F1 Score</th></tr></thead><tbody><tr><td align="left">Training Set</td><td align="left">0.746</td><td align="left">0.746</td><td align="left">0.743</td><td align="left">0.740</td></tr><tr><td align="left">Test Set</td><td align="left">0.708</td><td align="left">0.708</td><td align="left">0.785</td><td align="left">0.679</td></tr></tbody></table><p>Logistic regression demonstrates strong performance in both accuracy and precision, aiding in more accurate judgments of the game situation.</p><h4 id="7-2-2-Identify-the-most-relevant-factors"><a href="#7-2-2-Identify-the-most-relevant-factors" class="headerlink" title="7.2.2 Identify the most relevant factors"></a>7.2.2 Identify the most relevant factors</h4><p>The game is analyzed using performance and momentum functions as key factors for correlation assessment. Model analysis results are statistically significant ($p &lt; 0.05$), indicating the model meets requirements. Additionally, VIF indices below $10$ confirm no multicollinearity issues, ensuring a well-constructed model. The game can be approximated by the equation:<br>$$ y &#x3D; 0.09 + 0.708 \times \text{PredictedValue} + 0.41 \times \text{Momentum} $$<br>Ranking indicators by relevance, $X_5$ (server) and $X_{10}$ (net points won) emerge as the most significant factors. This analysis suggests that serving is the highest influencing factor, followed by scoring.</p><h3 id="7-3-Suggestions-to-the-player"><a href="#7-3-Suggestions-to-the-player" class="headerlink" title="7.3 Suggestions to the player"></a>7.3 Suggestions to the player</h3><p>Considering indicators highly correlated with momentum ($X_{10}$, $X_5$, and $X_8$), we offer the following suggestions:</p><ol><li>Strengthen serving training in daily life to maximize its advantage in initiating points and building momentum.</li><li>Increase net approaches during play; scoring at the net is instrumental in improving “momentum.”</li><li>Focus on hitting more winning points. If the opponent scores consecutive winning points, a timely pause (e.g., medical timeout, coaching break) should be utilized to disrupt their rhythm.</li></ol><h2 id="8-Task-4-Model-Analysis"><a href="#8-Task-4-Model-Analysis" class="headerlink" title="8 Task 4 Model Analysis"></a>8 Task 4 Model Analysis</h2><h3 id="8-1-Model-Testing"><a href="#8-1-Model-Testing" class="headerlink" title="8.1 Model Testing"></a>8.1 Model Testing</h3><p>For model testing, we use the Problem 1 model. The independent variable data from Carlos Alcaraz’s match against Daniil Medvedev (2023-wimbledon-1601) serves as the test set, while other datasets are used for training, with Player 1 remaining the primary observation.</p><p>The prediction effect is evaluated as follows:</p><p><strong>Table 8: Performance Metrics on Test Set</strong></p><table><thead><tr><th align="left">Dataset</th><th align="left">Accuracy</th><th align="left">Recall</th><th align="left">Precision</th><th align="left">F1</th></tr></thead><tbody><tr><td align="left">Test set</td><td align="left">0.962</td><td align="left">0.978</td><td align="left">0.957</td><td align="left">0.966</td></tr></tbody></table><p>A visual comparison between actual and predicted values shows a high prediction accuracy. The horizontal axis represents the natural series, and the vertical axis indicates whether a score was achieved (1 for score, 0 otherwise).</p><p>The prediction effect shows improvement compared to the results from the 5.1 model test.</p><p>The key difference between this test and Section 2.3 is that this test specifically trains the model on data from a single player (Carlos Alcaraz), whereas Section 2.3 used a mixed dataset of all players. This highlights that individual player characteristics significantly influence the model’s prediction accuracy.</p><h3 id="8-2-Factors-that-may-affect-the-prediction-accuracy-of-the-model"><a href="#8-2-Factors-that-may-affect-the-prediction-accuracy-of-the-model" class="headerlink" title="8.2 Factors that may affect the prediction accuracy of the model"></a>8.2 Factors that may affect the prediction accuracy of the model</h3><p>Individual player factors significantly impact prediction accuracy: models trained on single-player data achieve higher accuracy than those trained on mixed datasets. This suggests that the chosen independent variables are linked to individual player abilities, thus limiting the model’s generalizability.</p><h3 id="8-3-Discussion-on-the-degree-of-model-generality"><a href="#8-3-Discussion-on-the-degree-of-model-generality" class="headerlink" title="8.3 Discussion on the degree of model generality"></a>8.3 Discussion on the degree of model generality</h3><p>Based on the selected independent variables, the model’s generality is discussed from the following perspectives:</p><ol><li><strong>Competition Rules</strong>: Variables such as $X_1$ and $X_9$ are meaningful within tennis rules; their applicability may not extend to other sports.</li><li><strong>Game Characteristics</strong>: Variables like $X_{10}$ and $X_{11}$ pertain to unique tennis characteristics, such as net play. These may not translate to sports like table tennis, where players rarely approach the net in the same manner.</li><li><strong>Individual Player Characteristics</strong>: The high accuracy of player-specific models suggests that personal factors—including serving habits, gender, physical strength, and hitting power—are crucial for prediction accuracy, thereby limiting the model’s universal applicability.</li></ol><h2 id="9-Strength-Weakness-and-Further-Discussion"><a href="#9-Strength-Weakness-and-Further-Discussion" class="headerlink" title="9 Strength, Weakness and Further Discussion"></a>9 Strength, Weakness and Further Discussion</h2><p>Our model offers insights into player performance prediction based on their actions, demonstrating several strengths that provide inspiration for future research:</p><ul><li>The model training and prediction speeds are very fast, allowing for rapid modeling with simple data processing.</li><li>The model integrates multiple features, enabling a comprehensive analysis of player “momentum” changes from various perspectives.</li><li>The model’s visualization is intuitive, and its parameters can be easily adjusted.</li></ul><p>However, upon reflection, we identify several areas where the model could be improved:</p><ul><li>In terms of independent variable selection, incorporating more representative and universal variables could enhance the model’s versatility, although this might slightly reduce accuracy in specific contexts.</li><li>Collecting more extensive training data, beyond just what was provided for this event, could improve robustness.</li><li>Incorporating factors beyond player actions, such as weather conditions, crowd cheers, venue specifics, and historical player records, could provide a more holistic understanding.</li></ul><hr><h2 id="Memo"><a href="#Memo" class="headerlink" title="Memo"></a>Memo</h2><p><strong>To</strong>: Darren Cahill and other great tennis coaches<br><strong>From the team</strong>: 2430080<br><strong>Date</strong>: February 6, 2024<br><strong>Subject</strong>: Analysis of Article and Strategies for Further Research</p><p>In today’s tennis, optimizing players’ game conditioning is as crucial as technical and physical improvements to enable timely wins or judicious energy management. This article quantifies “momentum” and highlights its importance, providing strategies for your reference.</p><p>By analyzing Wimbledon Grand Slam match data, including scores, serves, points, and errors, our team developed a process and metrics to predict and analyze player form over time. This helps identify metrics with the greatest impact on “momentum” and form. We will detail this analysis and provide specific recommendations.</p><h3 id="Our-methodology"><a href="#Our-methodology" class="headerlink" title="Our methodology:"></a>Our methodology:</h3><p>Our methodology primarily employs a machine learning model focused on XGBoost for data processing.</p><ul><li>Using the XGBoost model, we generate a Receiver Operating Characteristic (ROC) curve. This curve reflects the sensitivity and specificity of continuous variables, with a larger Area Under the Curve (AUC) indicating higher diagnostic accuracy. The point on the ROC curve closest to the upper-left corner represents the optimal balance of sensitivity and specificity.</li><li>We standardize and normalize key indicators—including serve, score, error, and net play—for consistent comparison and processing. Subsequently, using logistic regression, we predict game fluctuations at specific moments, offering insights into dynamic shifts.</li></ul><h3 id="Findings-and-Recommendations-of-the-Study"><a href="#Findings-and-Recommendations-of-the-Study" class="headerlink" title="Findings and Recommendations of the Study:"></a>Findings and Recommendations of the Study:</h3><ul><li>During a match, if the opponent consistently scores, wins more points, or scores more at the net—indicators strongly correlated with “momentum”—a timely pause (e.g., a medical timeout or coaching break) should be proposed to disrupt their offensive rhythm.</li><li>Game tactics should be adapted to opponent characteristics. Against opponents with strong explosive power and fierce offense, strategically avoid their strengths, conserve energy, and capitalize when their “momentum” shows signs of declining. If facing an opponent with low momentum early in the match, aim to score consecutive points to keep their momentum suppressed and secure a swift victory.</li></ul><h3 id="Our-long-term-recommendations-are-as-follows"><a href="#Our-long-term-recommendations-are-as-follows" class="headerlink" title="Our long-term recommendations are as follows:"></a>Our long-term recommendations are as follows:</h3><ul><li>For normal training, prioritize improving serve quality and scoring rate. The model indicates serve has a significant impact on player “momentum” and scoring, warranting frequent practice.</li><li>Implement player pressure training and psychological counseling to prevent substantial momentum declines caused by economic-level drops. Concurrently, analyze the player’s optimal “in-the-zone” period and devise strategies to extend or appropriately modify it.</li></ul><p>We thank you for your time and consideration, and hope that you will adopt our suggestions so that more players can realize their talents and become stronger.</p><p>Sincerely,<br>Team 2430080<br>Your friends</p>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 数学建模 </tag>
            
            <tag> 机器学习 </tag>
            
            <tag> 竞赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>抓住2023的小尾巴</title>
      <link href="/2023/12/31/2342/"/>
      <url>/2023/12/31/2342/</url>
      
        <content type="html"><![CDATA[<p>一眨眼2023居然马上就要结束了。我在慌乱之中拿起了笔，总想写些什么，沉默良久后又作罢。</p><p>一个荒诞的考期，一个兵荒马乱的周末。曾几何时，我耗费了太多的时间在一些或有意义或无意义的事情上。来到这里两年有余，却依旧难以洗去当初的锐气。我想做许许多多的事，见识许许多多的人，只可惜2023将要过去，我只能存有遗憾地等待又一年了。</p><p>惊险、多梦、神奇，是我在这一年末留存的最后念头。期待新的一年里我们都能成长成为更好的人，縱浪大化裡，不喜亦不懼。</p><p>谨以此文，纪念我的2023.</p>]]></content>
      
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 随笔 </tag>
            
            <tag> 年终总结 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>11月12日</title>
      <link href="/2023/11/12/1620/"/>
      <url>/2023/11/12/1620/</url>
      
        <content type="html"><![CDATA[<p>天气不错！</p><p><em><strong>Lazy sunny day</strong></em> ~ ~</p><p><img src="/2023/11/12/1620/dairy_11%E6%9C%8812%E6%97%A5.jpg" alt="窗外风景。PS:在图书馆六楼东中文阅览室，窗边有一排小圆桌。倘若天气晴朗，坐在桌边，只一转头、轻松便能望到很远很远的地方。冬日的阳关柔和，即便没有百叶窗的遮拦，也不会感到刺眼。这大概是能让我在慵懒的周末从床上爬起来的最大动力了吧:) "></p>]]></content>
      
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 随笔 </tag>
            
            <tag> 记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>远山的回响|“新村民”现象背后的哲学皈思</title>
      <link href="/2022/12/10/1720/"/>
      <url>/2022/12/10/1720/</url>
      
        <content type="html"><![CDATA[<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>在这个高度智能化、信息化的时代，城市的生活节奏正随着时代的发展越来越快。越来越多的年轻人或因不忍各方面的压力、或因渴望宁静与自然已久，选择“裸辞”。也有年轻人，在自己无限青春美好的年华走向农村，建设农村——他们成为了推动乡村振兴的重要力量。央视推出的系列报道——《远山的回响》讲述的正是他们的故事。“新村民”正在成为中国农村的一种活跃的新生力量，也正在成为流传于都市职场人心中的向往。是什么，让他们勇敢地迈出了这一步伐？</p><h2 id="01心系着另一片土地的人"><a href="#01心系着另一片土地的人" class="headerlink" title="01心系着另一片土地的人"></a>01心系着另一片土地的人</h2><blockquote><p>生活不止眼前的苟且，还有诗和远方。</p></blockquote><p>2011年，张扬在初识上海西郊的岑卜村时便爱上了那里。岑卜村沿河而建，一面临水。夏夜有飞扬的萤火，清晨有甜糯的青菜。“微雨过，小荷翻，榴花开欲燃。”“潭中鱼可百许头，皆若空游无所依。”湖水之下，能看见荡漾的水草的肌理。污染性企业早已迁出，这里处处彰显生态文明建设的成果。最初，张扬和妻子只是周末住在这里享受自然的宁静。活在身体的此时此刻，他们后来选择彻底辞职，来村里创业，并长住下去。</p><p>女儿在村里长大，她在那里有着无数的动物朋友与大自然老师。村里还住着其他“新村民”：有科学家，有画家，有农学家，也有运动员。各式各样的人彼此间往来友好，常常相约做饭，烹饪他们亲手栽培出的食材。</p><blockquote><p>每一个人的心中都住着一个陶渊明。</p></blockquote><p>李久太出身于农村。他因成绩优异，哈工大建筑专业毕业后直博清华大学。12年学涯他看遍了建筑的“美”，但在他的视线落回农村之时，他才明白了那些“美”究竟差在哪里。他抛弃了名利，在山东威海的大水泊镇度过了五年时光。</p><p>李久太投身于农村改造当中。他与镇政府签订了合同，卖掉了北京的房子，在三岐山上的一处破旧的厂房打造了风格别样的“设计谷”。李久太担任起了清华大学乡村振兴工作站文登基站的站长，用自己创意盘活了那些闲置废弃的农房，将它们打造成为富有传统韵味的特色民居。他流转了村里的荒地，每年为村合作社创造十多万的租金。</p><p>李久太善用人和资源改造大水泊镇，在互联网上一炮走红，吸引来了16名博士、教授级专家、200多名城市精英在此定居，成为“新村民”。这个原本狭隘肮脏、名不经传的地方实现了华丽转身。</p><p>走出大山，跳出农门，曾经是多少代人的热切期望。现代社会的愈演愈烈的“内卷”式竞争。暗无天日的职场和望不到头绩效考核勾起了他们的乡愁。当下，回归乡村正在成为一种新时尚。对于一部分人来说，逃离城市成为“新村民”，是为了规避城市对自己内心的侵蚀。而对于另一部分人来说，成为新村民，是为了实现自己新的人生追求。他们对乡村有着独特的情怀，对于“自然”“和谐”有着自己深刻的理解。他们认同乡村，愿意用自己的知识和技能去推动乡村。</p><p>倘若能放下都市的最后执念，人们便有了来去自由的权利，便有了掌握命运的权利。乡村便成为他们生命的舞台，亦或是归宿。“新村民”便就此产生了。</p><h2 id="02老庄哲学的相关内涵"><a href="#02老庄哲学的相关内涵" class="headerlink" title="02老庄哲学的相关内涵"></a>02老庄哲学的相关内涵</h2><p>老子主张“返璞归真”。在老子看来“婴儿之未孩”是最为淳朴无邪、无拘无束的时期，淳朴无欲，清静无为，处于一种与宇宙浑然一体的自然状态。</p><p>老子选择了归隐，以避免樊尘的纷扰。深思熟虑之后，他选择了从洛邑向西出走，避开东边的家乡、南边令他失落的楚国及北边的漫漫凛冬。西边有昆仑山、函谷关，有两条大河的源头，有壮阔、险要的地势，都为他所向往。他在优哉游哉的青牛上悠然自得，享受着自然的奥秘与退隐后的轻快，任思想在世间徜徉，任青牛一路上走走停停。牛在前面走，老子在后面欹着，正反之间达到平衡和统一，他们共同奔赴自然，真正达到了“返璞归真”的生命之道。</p><p>“大道泛兮，其可左右。万物恃之而生而不辞，功成不名有，衣养万物而不为主。常无欲，可名于小。”此处“无欲”即“自然”，“无欲”作为“自然”是“道”的本性。《老子》指出了人的欲望的三个表现：其一，作为肉体存在二具有的感官欲望；其二，心灵上的恣情纵欲；其三，行为上的追名逐利。</p><p>“无色令人目盲，五音令人耳聋，五味令人口爽。”这些伤害源于人对感官欲望的本能追逐中。“驰骋畋猎，令人心发狂。”心灵上的恣情纵欲使人陷入迷狂而背弃道德。而对于“名”“利”的追求，又会使得人们陷入争斗之中。因而“欲”存在着多种危害，在老子的哲学思想看来，应“以不欲为欲”。</p><p>“无知”，即不用“智”或不认知。“无知”避免了人们用智慧去看待、批判、谋划和取舍，避免陷入心物二元对待的格局中，导致自然之“道”的消解。《老子》第二章描绘了人因用“智”带来的自我蒙蔽以及拯救之道。用“智”的直接后果是落入知识论的相对视野之中。</p><p>“无心”，就是“无知”“无欲”所达到的境界，使心灵回归原初。</p><p>“无欲”“无知”“无心”能够拨开种种非本真性的生存欲望，使得一个人得以进入“无为”“自然”的生存状态之中。老子认为，“大道至简”，生活应当以此参照进行，才能无为而无不为，不为繁杂所烦恼和困扰。自然界是人类生命源泉，人只要维持生命活动，必须顺乎自然，适应自然变化规律，才能真正乐在其中。老子追求“天地合一”的自然境界。尊重自然、顺应自然是养生、养心、养神的根本原则。老子顺乎自然，怡淡寡欲，静养柔气的养生思想成为了道家养生的指导思想，甚至深远地影响了传统医学的发展。</p><p>庄子的人生目标是重视生命，轻视名利。他强调人应修炼自己的内在人格，追求自由境界，这与当时浮躁的社会风气格格不入。《逍遥游》表现了庄子对自然浪漫生活的向往的追求。“至人无己，神人无功，圣人无名。”自由和尊严的价值观深深根植于人性之中。</p><p>“庄子真正追求的是逍遥之乐，这是一种精神的自我满足，指一种非常识、非世俗的怡悦之乐，是超脱现实我之有限性达到精神之无限的境界。”</p><p>庄子的人生观、君子观，是当时社会中生活思索和价值追求的体现。春秋战国兵荒马乱的社会背景之下，庄子作为一个没落的贵族、漆园小吏，无力抵御或是改变自身所处的滚滚历史洪流。 [<a href="#_edn1">i]</a>走在人世间，穿越熙熙攘攘的集市、生灵涂炭的战场，许多人为命运所束缚，那个时代，人们失去了“自我”斗争的力量和话语权。</p><p>庄子通过提升自己身的精神修养，改变了自己的存在状态，使自己达到人与世界的精神和谐。 他从高度的精神自由与道的默契出发，把对人的外在观察和思考转向对人的内在探索和守护，洁身自好，达到逍遥自在、个性自由的人生选择。在自我实践、修养提升中达到“自然”“无为”。</p><h2 id="03现象解构"><a href="#03现象解构" class="headerlink" title="03现象解构"></a>03现象解构</h2><h3 id="重拾“自然”的喜悦"><a href="#重拾“自然”的喜悦" class="headerlink" title="重拾“自然”的喜悦"></a>重拾“自然”的喜悦</h3><p>从每周周末的短暂留居，到干脆辞职来到村里长住并创业，张扬和妻子能够迈出这一步，做出了巨大的努力——自我认知的重定位和追求的转变，需要为诗和远方放弃自己的所有执念和部分钱财。对于来到岑卜村受感染并定居下来的其他科学家、运动员、画家等人，又何尝不是呢？</p><p>岑卜村“新村民”们的生活智慧，在于始终如一回归自然、保持本真、坚守单一，这与老子哲学思想是相通的。岑卜村的“新村民”们选择了归去，而不是远远地眺望而不及，他们终于回到他们念念不忘的农村生活当中，重新拥抱自然。</p><p>“阡陌交通，鸡犬相闻。”山川秀美，鸟语花香。白天在芳草和繁花中迷失归路，夜里萤火在湖面上飞舞。脚下有大地，头顶有星河。这是“新村民”们所直接接触的“自然”。事实上，真正的“自然”，早已超出物理意义上的“大自然”范畴。</p><p>人们不再为城市的嘈杂、晋升的欲望而烦恼。为城市生活奔波过，才知道闲暇的可贵。在岑卜村，摆脱了市井欲望的束缚，他们有机会真正接触和认识自己:从“无欲”到“无知”再到“无心”。仿佛人与人之间彻底抛弃了“猜疑”与“误解”。“大道至简”，昭示着精神内耗的终止，一切归于平淡。他们彼此问候，彼此帮助。倘若你碰巧经过一个村民的园子，他一定会摘几把新熟成的菜品，邀请你前来品鉴。在夜幕渐渐落下，灯火渐渐亮起之时，他们在昏暗的灯光下拼其餐桌，摆上各自的劳作成果，沐浴在“烟火气”中，其乐融融。</p><p>他们也如同老子一般倒骑青牛归去。</p><p>清静无为，大道至简，人生美妙。经历了精气神的洗礼，人们终于能享受重拾“自然”的喜悦了。“自然”的滋养之下，他们更为友善和理性，愈发团结。</p><h3 id="“广阔天地，大有作为”"><a href="#“广阔天地，大有作为”" class="headerlink" title="“广阔天地，大有作为”"></a>“广阔天地，大有作为”</h3><p>12年来，看遍了建筑的“美”，才恍然发现，真正的美在山村。初家村满足了李久太对农村和大海的所有向往，让他在那里心甘情愿地渡过了五年时光。李久太在改造初家村的几年历程当中吃尽了苦楚，艰辛的条件、人情往来的不快和委屈并没有使他停滞不前，甚至没能真正打入他的心扉。但他早以超脱于此。初家村是他发挥天马行空的想象力的舞台，在这里，他能尽情地追求自由和浪漫，打造一个非同凡想的农村。</p><p>  庄子在当时并没有能力去改变。那个时代的特性，决定了他所能做的只是皈依与自己内心的一片净土，从修养和实践的提升中达到“自然”“无为”。但是李久太不同。李久太很幸运的生活在这样一个美好的时代。这里没有战争的纷扰，没有剥削、压迫的社会制度。“振兴乡村”在这个时代并不是一句口号，而是一场全国上下齐心协力的、真真正正的“斗争”。一个李久太的力量虽小，他的精力也十分有限，但如果是千千万万的李久太呢？振兴乡村的潮流已然势不可当。越来越多年轻人抛却了城市优渥的生活条件，甚至如李久太一样，不惜卖掉自己在北京的房子，变现资金来支撑自己艰苦创业。</p><p>  “至人无己，神人无功，圣人无名。”李久太追求的，是一个理想中的新农村，一片萦绕着村民欢声笑语的乐土。名声与赞誉，与李久太梦想中的“农村”而言，仿佛只是附赠品。他极大地改善了村民的居住环境，增加了居民的收入，吸引来一众精英来此定居，接下他的“接力棒”。</p><p> 远山给了他回响，可他依然是那个村中穿梭往来的李久太。</p><p>成为“新村民”，是个人追求。“久在樊笼里，复得返自然。”归去，是个人选择，亦是对自己的重新认识。对于张扬以及一众“新村民”而言，这里是他们内心深处的一方净土。他们不需要再为城市高昂的消费和沉浮的职涯忧虑。</p><p>选择了隐逸的“新村民”，或许会为那些城里的奋斗一族感到不齿。但双方之间并没有什么值得互相看不起的。“新村民”只是一种生活方式。或许对于他们而言，享受到“归去”、重拾“自然”的喜悦，已经是最大的满足了吧。</p><p>“新村民”是推动乡村振兴的重要力量。过去，城市从农村剥夺了太多劳动力和知识分子，留在农村的主要是老人和妇女儿童，亦或患有疾病或残疾的非劳动力。依靠他们来振兴乡村，显然是不太现实的。起初，岑卜村中居住的几乎都是老年人，他们平淡地过着生活，仿佛与世隔绝。以张扬为代表的一批“新村民”的入驻，才使得岑卜村迸发出强大生命力。他们当中，不乏高学历者和社会精英。他们将知识和技术带入农村，同时也是城市发展之后对乡村的反哺。李久太更是靠奋斗，让初家村焕然一新吸引“新村民”入驻、再奋斗，实现永续发展。</p><p>  央视《远山的回响》系列报道，就讲述了一系列诸如此类至纯至美的故事。他们对于乡村振兴，是有着重大意义的。</p><h2 id="04“总而言之”"><a href="#04“总而言之”" class="headerlink" title="04“总而言之”"></a>04“总而言之”</h2><p>道家清净简朴的生活方式，是众多“新村民”们的追求。人们按照自然节律调适、生活，自由自在，其乐融融，超然洒脱。烦躁不安的社会下，我们能够从中汲取力量，淡薄名利，超越社会的种种制约，从容面对自然法则，甚至是死亡。</p><p>但这样的思想，不可否认其存在消极的一面。庄子的选择，是逆来顺受，是囿于时代的无奈。很多时候，人们也不像岑卜村的那些精英村民一样，自身能力强悍，进退自由。对于精英来说，自己已然拥有的东西，做出权衡取舍时更为果断、自如。而普罗大众大多肩负着房贷、养老、下一代教育的多重压力，在这种情况下，取舍则更为困难。</p><p>“结庐在人境，而无车马喧。问君何能尔，心远地自偏。” 事实上，“新村民”并不意味着他们真的要身接乡村。庄子在肉体上也显然不能抵达他理想的彼岸。庄子一生穷困潦倒，精神却汪洋恣肆。道家讲求超凡脱俗。庄子“逍遥”的思想亦能帮助拓展“新村民”的内涵。这样，不论是在城市还是乡村，<strong>只要心足够“远”，人们都能享受重拾“自然”及“诞生于世间”的喜悦了。</strong></p><p>2022年12月于北京</p><hr><p><em><strong>ref.</strong></em></p><p>[1] 杨莉.人在囧途:大城市、小城镇，是逃离还是坚守？[J].中国大学生就业,2019(21):16-18.</p><p>[2] 一条. 上海最美水上村落,一群高学历青年抱团生活[O].新浪微博.</p><p>[3] 苏轼.《阮郎归·初夏》. “燃”字 一作 “然”。</p><p>[4] 毕淑敏.带上灵魂去旅行[M]. 北京十月文艺出版社出版，2011.</p><p>[5] 央广网. 远山的回响｜清华博士当起“新村民”：用乡村之美连接人、吸引人[O].</p><p>[6] 陈绍燕,孙功进.新论老庄[M].山东人民出版社.2020</p><p>[7] 孙君衡.中国先秦七子君子观研究[M].武汉大学出版社,2022.</p><p>[8] 詹时窗, 谢清果.中国道家之精神[M].复旦大学出版社,2009.</p><p>[9] 孟轲.《孟子·公孙丑下》.</p>]]></content>
      
      
      
        <tags>
            
            <tag> 哲学 </tag>
            
            <tag> 社会现象 </tag>
            
            <tag> 思考 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于宋庆龄</title>
      <link href="/2022/04/03/1000/"/>
      <url>/2022/04/03/1000/</url>
      
        <content type="html"><![CDATA[<p>下了什刹海站，穿越狭长的胡同，就来到了后海。沿着岸边走约百米，便是宋庆龄故居。春和景明，波澜不兴。我们来到这里的时候，路人笑着和我们说，院里的西府海棠正开得茂盛。 </p><p>宋庆龄在北京的居所十分静谧。江南的假山、流水、小桥，北方迂回的长亭、宽敞的院落，摇曳的枝条与细碎的阳光，一切都结合得恰到好处。 </p><p>在展馆的中央，是宋庆龄与孙中山的合影。四周陈满了信件和手稿。我被这样一句话吸引了：</p><blockquote><p>我是幸福的，我想尽量帮助我的丈夫处理英文信件。……对我来说，结婚就好像进了学校一样，不过没有烦人的“考试”罢了。  ——宋庆龄 </p></blockquote><p>通过阅读回忆录以及展品摘要，我们得知：在长期的相处和共同战斗之中，宋庆龄与孙中山坠入了爱河，甚至不顾父母的反对，逃离软禁。巨大的年龄差异没能成为他们爱情的鸿沟，他们携手走向永恒。 </p><p>孙中山送给宋庆龄的定情信物是一把小巧精致的手枪，她一直携带在身上。如今在展台上依旧熠熠生辉。 </p><p>1925 年，孙中山在北京逝世，她陷入了巨大的悲恸之中，但却没有因此消沉。在一年后的国民党二大上，发表了坚持孙中山三大政策的演说。她接续过丈夫身上的重担，继续为中国人民的民主与自由、和平与发展奋斗着。宋庆龄为了丈夫的遗愿，再次踏上了旅居欧洲的行程。她访问了莫斯科，寻求革命道路，在前苏联和欧洲求学，与友人积极探讨革命理论。 </p><p>宋庆龄为革命事业、和平事业和妇女儿童福利事业奋斗了终生。和孙中山一样，宋庆龄庆龄在国外接受了现代化的教育，萌生了先进的思想，在很多方面与孙中山先生相投。二人并不受封建思想观念的束缚，彼此奔赴成为眷属。早年，她谨慎热情地帮助孙中山先生处理各项事务，照顾他的生活，甚至是在危难关头毫不犹豫地挡在他地身前。体贴周到使得他得以安心的工作。在孙中山病逝后，她依然秉承着丈夫的志向，走向时代的风暴之眼。 </p><p>回顾宋庆龄先生的一生，我们很难不从中得到启迪。宋庆龄先生有着一颗赤诚的心，一是对自己的丈夫忠诚，她同他一起战斗，为他仕病、完成了他的遗愿；二是对华夏民族赤城。不论我们将目光投向哪个时间节点，宋庆龄先生永远是同中华民族的利益站在一起的，她总是不顾自己的安危，在骤变之时勇敢地批判、指责走向歧途的国民党，她所做的一切，都是为了让百姓免受苦难，让主权得以保证。 </p><p>出了展馆，再往前走十几米，就是和平鸽舍。宋庆龄先生享誉世界的另一个原因，便是她长期担任大量教育、妇女儿童等方面福利活动的要职，奔赴世界各地、前往第三世界的国家进行交流，成立大量基金会，矢志不渝地为中国和平乃至世界和平奋斗着。 </p><p>一名女性能在这样纷乱复杂、风起云涌的时代做出如此之多的贡献，是很难想象的。 </p><p>1981年5 月29日，民主与和平的斗士最终陨落了。她的故事、信件、手稿、画像、物件等被后人妥善地保存了下来，存放在这里，向公众展览。这里成为了一个爱国主义教育基地。 </p><p>心中但有信念，无处不放光芒。 </p><p><img src="/2022/04/03/1000/SongAndSun.jpg"></p><p>2022年4月于北京</p>]]></content>
      
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
            <tag> 历史 </tag>
            
            <tag> 人物 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于梦境</title>
      <link href="/1900/01/01/0000/"/>
      <url>/1900/01/01/0000/</url>
      
        <content type="html"><![CDATA[<p><code>先让时间无限倒退！此处标注的时间是计算机能够表示的最早时刻。这篇博文记录的文字没有经过加工，大多是我在半梦半醒的状态下记录下来的，读起来并不通顺。</code></p><p>梦境与大脑的进化程度高度相关，从某种不严谨的角度来看，或许哺乳动物的第一个梦，最早能够追溯到三叠纪晚期。我们的祖先在梦中遭遇了什么，有何奇遇、梦里的事物是令他们幸福还是恐惧，现如今人们已经无从得知了。梦总是消逝的飞快，从梦中惊醒，仅仅片刻所有的思绪便消失的无影无踪。近年来因为压力与作息的缘故，我常常做梦，时而引人入胜，时而荒诞离奇。<strong>为此，我开了这篇博文，若有机缘，便立刻记录下来，留待日后玩味。</strong></p><h2 id="《奇梦》（一）"><a href="#《奇梦》（一）" class="headerlink" title="《奇梦》（一）"></a>《奇梦》（一）</h2><p><strong>2023年10月13日；约莫1:00~8:28。注：自我在内蒙遭遇的事故发生后约20日。</strong></p><blockquote><p>我梦到我和几位████同学（p?w, l?g，l?y，z?l，████，小学同学罗██y）策划了一场自驾旅行，旅游路线记不清了。这是一场很伟大的旅行  瑰丽  壮阔 有部分是在空中。我们先是才空中穿过了一部分地区，我乘坐的是类似摩托车一样的黑色热气球，我坐在上面仿佛坐着摩托车，气球是需要充气的，他们好像是坐直升飞机或者跟我一样。我们从空中穿过了大半个地球，其实更像是从太空中看到的 。很震撼，我们能从太空中看到各种各样的地貌，比如内蒙的自然地理环境，但是雪顶，但是为啥看着还会带地名的呢？ 有一部分地区再闹蝗灾，我们从空中经过的时候天空到处是蝗虫流与我们逆行  虽然在出发前看新闻就有预先心理准备了，但是经过的时候还是惊讶到了 然后是地上部分   我们下来后  我将热气球放气，然后将它折叠收进书包。我们骑着各自的电车，在曾经的西南山里的一个█████出发，又好像回到了高一时上下学电车大军的时代。</p><p>我们路过████的那条街道，在对面████，然后又一次出发了。 我出发前还检查了行李，看看我的热气球还在不在。我们在红壹佰路与在江的路口左转，现在是████小学对面那条路的靠近████路的部分。我在这个地方和████聊了几句，我说我好像没带我电车的充电器。于是我开始忧虑这个，想着经过哪个地方的时候买一个。 但是因为下过雨，这里发生了路面塌陷，裹挟着泥泞的洪流遍地都是，然后在将要过马路的时候，那一部分道路塌陷比较严重，所以我花了点功夫才上去到主路，其实也就是一瞬间的事情，绿灯就走完了。但是这是突然前面有人举着爱心绿灯的牌子（是一个纸牌子但是上面有电子红绿灯和镶着光编的字）让我们这条路的人先过，就在这时，我身上有些瘙痒，然后我就醒了。</p><p>醒来以后：很难以理解的是，我们策划的路线应该是由华北平原北上然后穿过内蒙向西，为啥后面路面旅行的部分却是在家乡的这些地方呢？<br>另一个疑问是我们如何同样是一天多不到两天的时间里完成这么长的路线的旅行的？</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
            <tag> 记录 </tag>
            
            <tag> 梦境 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
