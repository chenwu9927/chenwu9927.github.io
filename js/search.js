var searchFunc=function(e,a,r){$.ajax({url:e,dataType:"xml",success:function(e){var t,n,l,i,s=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();function c(){t&&"none"!==t.style.display&&(t.classList.add("closing"),setTimeout(function(){t.style.display="none",t.classList.remove("closing"),n&&(n.value=""),l&&(l.innerHTML="")},400))}document.getElementById(a)&&(document.getElementById(r),t=document.getElementById("search-modal"),n=document.getElementById("modal-search-input"),l=document.getElementById("modal-search-result"),(e=document.getElementById("local-search-input"))&&e.addEventListener("click",function(){t&&(t.style.display="block",n)&&setTimeout(function(){n.focus()},100)}),t&&t.addEventListener("click",function(e){e.target===t&&c()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&t&&"block"===t.style.display&&c()}),n)&&l&&(i=l,e=n)&&i&&e.addEventListener("input",function(){var u='<ul class="search-result-list">',d=this.value.trim().toLowerCase().split(/[\s\-]+/);i.innerHTML="",this.value.trim().length<=0||(s.forEach(function(e){var n,t,l,i=!0,s=(e.title&&""!==e.title.trim()||(e.title="Untitled"),e.title.trim().toLowerCase()),c=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),a=e.url,r=-1,o=-1;""!==c?d.forEach(function(e,t){n=s.indexOf(e),r=c.indexOf(e),n<0&&r<0?i=!1:(r<0&&(r=0),0==t&&(o=r))}):i=!1,i&&(u+="<li><a href='"+a+"' class='search-result-title'>"+s+"</a>",a=e.content.trim().replace(/<[^>]+>/g,""),0<=o&&(e=o+80,(e=0==(t=(t=o-20)<0?0:t)?100:e)>a.length&&(e=a.length),l=a.substring(t,e),d.forEach(function(e){var t=new RegExp(e,"gi");l=l.replace(t,'<em class="search-keyword">'+e+"</em>")}),u+='<p class="search-result">'+l+"...</p>"),u+="</li>")}),u+="</ul>",i.innerHTML=u)})}})};