(()=>{var e=document.getElementById("recent-comment").getAttribute("serverURL");let t=document.getElementById("recent-comment").getAttribute("count");t=t||10,$.ajax({url:e+"/comment?type=recent",dataType:"json",data:{count:t},success:function(e){let o="<ul>";e.forEach((e,t)=>{var n,a;o+="<li>"+(t+1)+"、 "+(t=e.insertedAt,new Date(t).toLocaleString()),e.pid?({href:t,author:n,str:a}=(e=>{for(var t=/<a[^>]*href=['"]([^\\"]*)['"][^>]*>(.*?)<\/a>/g,n=[];null!=t.exec(e);)n.push(RegExp.$1),n.push(RegExp.$2);return 0<n.length?(e=e.replace(/<a[^>](.*?)<\/a>/,n[1]),{href:n[0],author:n[1],str:e}):""})(e.comment),o+='<div class="waline-comment-content"><a style="display: block" href='+window.location.origin+e.url+t+">"+a+"</a></div>"):o+='<div class="waline-comment-content"><a style="display: block" href='+window.location.origin+e.url+"#"+e.objectId+">"+e.comment+"</a></div>",o+='<div class="waline-comment-content-author">--'+e.nick+"</div></li>"}),o+="</ul>",$("#widget-waline-list").append(o)}})})();